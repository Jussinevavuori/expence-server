(this.webpackJsonpexpence=this.webpackJsonpexpence||[]).push([[0],{209:function(e,t,n){e.exports=n.p+"static/media/pexels-johannes-plenio-1103970.afe78909.jpg"},215:function(e,t,n){e.exports=n(364)},216:function(e,t,n){},217:function(e,t,n){},242:function(e,t){},244:function(e,t){},258:function(e,t){},260:function(e,t){},288:function(e,t){},290:function(e,t){},291:function(e,t){},297:function(e,t){},299:function(e,t){},317:function(e,t){},319:function(e,t){},331:function(e,t){},334:function(e,t){},355:function(e,t,n){},356:function(e,t,n){},357:function(e,t,n){},358:function(e,t,n){},359:function(e,t,n){},360:function(e,t,n){},361:function(e,t,n){},362:function(e,t,n){},363:function(e,t,n){},364:function(e,t,n){"use strict";n.r(t);n(216),n(217);var r=n(0),a=n.n(r),i=n(30),o=n.n(i),c=n(16),s=n(2),u=n.n(s),l=n(4),f=n(35),d=n(65),m=n(5),p=n(23),h=function e(t){var n,r,a,i;Object(p.a)(this,e),this.id=void 0,this.displayName=void 0,this.email=void 0,this.photoUrl=void 0,this.googleId=void 0,this.id=t.id,this.displayName=null!==(n=t.displayName)&&void 0!==n?n:void 0,this.email=null!==(r=t.email)&&void 0!==r?r:void 0,this.photoUrl=null!==(a=t.photoUrl)&&void 0!==a?a:void 0,this.googleId=null!==(i=t.googleId)&&void 0!==i?i:void 0},v=n(34),b=n(54),g=n(56),E=n(41),w=n(197),y=n.n(w),j=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,null,[{key:"API_URL",get:function(){return"https://expenceapp.herokuapp.com"}}]),e}(),O=n(198),k=n.n(O),x=n(211),D=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e,r){var a;return Object(p.a)(this,n),(a=t.call(this,r)).code=void 0,a.isApplicationError=void 0,a.name=e,a.code=e,a.isApplicationError=!0,a}return n}(Object(x.a)(Error)),S=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e,r,a){var i;return Object(p.a)(this,n),(i=t.call(this,e,r)).status=void 0,i.isServerError=void 0,i.status=a,i.isServerError=!0,i}return n}(D),T=function(){function e(){Object(p.a)(this,e),this.baseURL=void 0,this.axios=void 0,this.baseURL="".concat(j.API_URL,"/api"),this.axios=y.a.create({baseURL:this.baseURL,withCredentials:!0})}return Object(v.a)(e,[{key:"endpoint",value:function(e){return"".concat(this.baseURL).concat(e)}},{key:"isAccessTokenValid",value:function(){var e=oe.getState().auth.accessToken;if(!e)return!1;try{var t=k.a.decode(e),n=1e3*Number((null===t||void 0===t?void 0:t.exp)||0);return Date.now()<n-5e3}catch(r){return console.warn("Error occured while checking access token",r),!1}}},{key:"attemptRefreshAccessToken",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r,a,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]&&i[0],this.isAccessTokenValid()&&!t){e.next=15;break}return n=this.endpoint("/auth/refresh_token"),e.prev=4,e.next=7,this.axios.get(n);case 7:r=e.sent,a=r.data,oe.getActions().auth._setAccessToken(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),oe.getState().auth.accessToken&&oe.getActions().auth.logout();case 15:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"onBeforeRequest",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.attemptRefreshAccessToken();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(e){var t=oe.getState().auth.accessToken,n=Object(E.a)({},null===e||void 0===e?void 0:e.headers);return t&&(n.Authorization="bearer ".concat(t)),Object(E.a)(Object(E.a)({},e),{},{headers:n})}},{key:"handleRequest",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,a,i,o,c,s,l,f,d,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.onBeforeRequest();case 3:return e.abrupt("return",t());case 6:if(e.prev=6,e.t0=e.catch(0),!e.t0.isAxiosError){e.next=17;break}if(n=e.t0,r=n.response,a=n.request,i=n.code,o=n.message,!r){e.next=14;break}throw d="string"===typeof(null===(c=r.data)||void 0===c?void 0:c.code)?null===(s=r.data)||void 0===s?void 0:s.code:"server/unknown",m="string"===typeof(null===(l=r.data)||void 0===l?void 0:l.message)?null===(f=r.data)||void 0===f?void 0:f.message:"Unknown server error",new S(d,m,r.status);case 14:if(!a){e.next=16;break}throw new D(i||"axios/request",o||"Error sending Axios request");case 16:throw new D(i||"axios/config","Error during Axios config phase: "+o);case 17:throw new D("axios/unknown","Unknown error during Axios request (".concat(e.t0.message,")"));case 18:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handleRequest((function(){var e=r.endpoint(t),a=r.getConfig(n);return r.axios.get(e,a)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){var a=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handleRequest((function(){var e=a.endpoint(t),i=a.getConfig(r);return a.axios.post(e,n,i)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handleRequest((function(){var e=r.endpoint(t),a=r.getConfig(n);return r.axios.delete(e,a)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){var a=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handleRequest((function(){var e=a.endpoint(t),i=a.getConfig(r);return a.axios.put(e,n,i)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"patch",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){var a=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handleRequest((function(){var e=a.endpoint(t),i=a.getConfig(r);return a.axios.patch(e,n,i)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}(),N=n(12),A=Object(N.b)({id:Object(N.d)().required().min(1),displayName:Object(N.d)(),photoUrl:Object(N.d)(),email:Object(N.d)(),googleId:Object(N.d)()}).required();function C(e){try{return A.isValidSync(e),!0}catch(t){return!1}}var I=new(function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"getProfile",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/auth/profile");case 2:if(t=e.sent,!C(n=t.data)){e.next=8;break}return e.abrupt("return",n);case 8:throw new D("auth/profile/invalid-response","Invalid profile response received from server");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"registerWithEmailAndPassword",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/auth/register",t);case 2:if(200===e.sent.status){e.next=5;break}throw new D("auth/register/invalid-response","Invalid response received from server during registration");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginWithEmailAndPassword",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/auth/login",t);case 2:if(200===e.sent.status){e.next=5;break}throw new D("auth/login/invalid-response","Invalid response received from server during login");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"forgotPassword",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/auth/forgot_password",t);case 2:if(200===e.sent.status){e.next=5;break}throw new D("auth/forgotpassword/invalid-response","Invalid response received from server during forgot password");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginWithGoogle",value:function(){window.location.href=this.endpoint("/auth/google")}},{key:"logout",value:function(){window.location.href=this.endpoint("/auth/logout")}}]),n}(T)),M={initialized:!1,_setInitialized:Object(m.b)((function(e,t){e.initialized=t})),user:null,isLoggedIn:Object(m.c)((function(e){return Boolean(e.user)})),accessToken:null,_setAccessToken:Object(m.b)((function(e,t){e.accessToken=t})),getProfile:Object(m.f)(function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.getProfile();case 3:n=e.sent,t._login(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.prev=9,t._setInitialized(!0),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})));return function(t){return e.apply(this,arguments)}}()),loginWithGoogle:Object(m.f)((function(){I.loginWithGoogle()})),loginWithEmailPassword:Object(m.f)(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.loginWithEmailAndPassword(n);case 2:return e.next=4,I.getProfile();case 4:r=e.sent,t._login(r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),registerWithEmailPassword:Object(m.f)(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.registerWithEmailAndPassword(n);case 2:return e.next=4,I.getProfile();case 4:r=e.sent,t._login(r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),forgotPassword:Object(m.f)(function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.forgotPassword(n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_login:Object(m.b)((function(e,t){C(t)&&(e.user=new h(t))})),logout:Object(m.f)((function(){I.logout()}))},F=n(24),P=n(407),L=function(){function e(t){if(Object(p.a)(this,e),this.integer=void 0,Math.floor(t)!==t)throw new Error("Cannot construct money amount from non-integer value");this.integer=t}return Object(v.a)(e,[{key:"add",value:function(t){return new e(this.integer+t.integer)}},{key:"subtract",value:function(t){return new e(this.integer-t.integer)}},{key:"decimal",get:function(){return this.integer/100}},{key:"unsignedDecimal",get:function(){return Math.abs(this.decimal)}},{key:"unsignedInteger",get:function(){return Math.abs(this.integer)}},{key:"euros",get:function(){return this.integer>0?Math.floor(this.integer/100):Math.ceil(this.integer/100)}},{key:"formatEuros",get:function(){return Math.abs(this.euros).toFixed(0).split("").reverse().map((function(e,t){return t%3===2?" "+e:e})).reverse().join("")}},{key:"cents",get:function(){return Math.floor(this.integer%100)}},{key:"formatCents",get:function(){return Math.abs(this.cents).toFixed(0).padStart(2,"0")}},{key:"sign",get:function(){return 0===this.integer?0:this.integer>0?1:-1}},{key:"formatSign",get:function(){return 0===this.integer?"\xb1":this.integer>0?"+":"-"}},{key:"formatFull",get:function(){return"".concat(this.formatSign," ").concat(this.formatEuros,".").concat(this.formatCents," \u20ac")}},{key:"isPositive",get:function(){return this.sign>=0}},{key:"isNegative",get:function(){return this.sign<0}}],[{key:"sum",value:function(t){return t.reduce((function(e,t){return e.add(t)}),new e(0))}}]),e}(),_=function(){function e(t){Object(p.a)(this,e),this.date=void 0,this.category=void 0,this.comment=void 0,this.amount=void 0,this.id=void 0,this.uid=void 0,this.date=new Date(t.time),this.comment=t.comment||"",this.category=t.category,this.amount=new L(Math.floor(t.integerAmount)),this.id=t.id||P.a(),this.uid=t.uid}return Object(v.a)(e,[{key:"toJson",value:function(){return{time:this.date.getTime(),category:this.category,comment:this.comment,integerAmount:this.amount.integer,id:this.id,uid:this.uid}}}]),e}(),q=Object(N.b)({id:Object(N.d)().required(),uid:Object(N.d)().required(),time:Object(N.a)().positive().integer().required(),category:Object(N.d)().min(1).required(),integerAmount:Object(N.a)().integer().required(),comment:Object(N.d)()}).required();function R(e){try{return q.validateSync(e),!0}catch(t){return!1}}var B=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"getTransactions",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/transactions");case 2:if(t=e.sent,n=t.data,r=n,!Array.isArray(r)||!r.every(R)){e.next=8;break}return e.abrupt("return",n);case 8:throw new D("transactions/get/invalid-response","Could not get transactions, received invalid response.");case 9:case"end":return e.stop()}var r}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"postTransaction",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/transactions",t);case 2:if(n=e.sent,!R(r=n.data)){e.next=8;break}return e.abrupt("return",r);case 8:throw new D("transactions/post/invalid-response","Could not post transaction, received invalid response.");case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteTransaction",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("/transactions/".concat(t));case 2:return n=e.sent,e.abrupt("return",204===n.status);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"putTransaction",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.put("/transactions/".concat(t.id),t);case 2:if(n=e.sent,!R(r=n.data)){e.next=8;break}return e.abrupt("return",r);case 8:throw new D("transactions/put/invalid-response","Could not put transaction, received invalid response.");case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"patchTransaction",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.patch("/transactions/".concat(t.id),t);case 2:if(n=e.sent,!R(r=n.data)){e.next=8;break}return e.abrupt("return",r);case 8:throw new D("transactions/patch/invalid-response","Could not patch transaction, received invalid response.");case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(T),U=n(13),W=n(14),z=n(384),G=n(385);function V(e,t,n){var r=e.reduce((function(e,n){var r,a=function(e){var n=t(e);return z.a(n,"yyyy-MM-dd")}(n);return Object(E.a)(Object(E.a)({},e),{},Object(U.a)({},a,[].concat(Object(W.a)(null!==(r=e[a])&&void 0!==r?r:[]),[n])))}),{}),a=Object.entries(r).map((function(e){return{date:G.a(new Date(e[0])),items:e[1]}}));return(null===n||void 0===n?void 0:n.sort)?a.sort((function(e,t){return t.date.getTime()-e.date.getTime()})):a}function K(e,t,n){var r=J(e),a=J(n);switch(t){case"<":return r<a;case"<=":return r<=a;case"==":return r===a;case">=":return r>=a;case">":return r>a}}function J(e){return 341*e.getFullYear()+31*e.getMonth()+e.getDate()}var Y={items:Object(m.c)([function(e,t){return t.transactions.items},function(e,t){return t.interval.startDate},function(e,t){return t.interval.endDate}],(function(e,t,n){return e.filter((function(e){return!K(e.date,"<",t)&&!K(e.date,">",n)}))})),itemsByDates:Object(m.c)([function(e,t){return t.transactions.filtered.items}],(function(e){return V(e,(function(e){return e.date}),{sort:!0})})),count:Object(m.c)([function(e,t){return t.transactions.filtered.items}],(function(e){return e.length})),sums:Object(m.c)([function(e,t){return t.transactions.filtered.items}],(function(e){var t=e.filter((function(e){return e.amount.integer>0})).reduce((function(e,t){return e+t.amount.integer}),0),n=e.filter((function(e){return e.amount.integer<0})).reduce((function(e,t){return e+t.amount.integer}),0);return{all:new L(t+n),incomes:new L(t),expenses:new L(n)}}))},H=new B,$={items:[],itemsByDates:Object(m.c)((function(e){return V(e.items,(function(e){return e.date}),{sort:!0})})),count:Object(m.c)((function(e){return e.items.length})),sums:Object(m.c)((function(e){var t=e.items.filter((function(e){return e.amount.integer>0})).reduce((function(e,t){return e+t.amount.integer}),0),n=e.items.filter((function(e){return e.amount.integer<0})).reduce((function(e,t){return e+t.amount.integer}),0);return{all:new L(t+n),incomes:new L(t),expenses:new L(n)}})),filtered:Y,categories:Object(m.c)((function(e){return e.items.map((function(e){return e.category})).filter((function(e,t,n){return n.indexOf(e)===t}))})),getTransactions:Object(m.f)(function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.getTransactions();case 2:return n=e.sent,t._getTransactions(n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_getTransactions:Object(m.b)((function(e,t){e.items=t.map((function(e){return new _(e)}))})),postTransaction:Object(m.f)(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.postTransaction(n);case 2:return r=e.sent,t._postTransaction(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_postTransaction:Object(m.b)((function(e,t){e.items.push(new _(t))})),deleteTransaction:Object(m.f)(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.deleteTransaction(n);case 2:return r=e.sent,t._deleteTransaction(n),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_deleteTransaction:Object(m.b)((function(e,t){e.items=e.items.filter((function(e){return e.id!==t}))})),putTransaction:Object(m.f)(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.putTransaction(n);case 2:return r=e.sent,t._putTransaction(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_putTransaction:Object(m.b)((function(e,t){e.items=e.items.map((function(e){return e.id===t.id?new _(t):e}))})),patchTransaction:Object(m.f)(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.patchTransaction(n);case 2:return r=e.sent,t._patchTransaction(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_patchTransaction:Object(m.b)((function(e,t){e.items=e.items.map((function(e){return e.id===t.id?new _(t):e}))})),onAuthChanged:Object(m.g)((function(e,t){return[t.auth.logout,t.auth._login]}),(function(e,t){var n=Object(F.a)(t.resolvedTargets,2),r=n[0],a=n[1];switch(t.type){case r:e._clearTransactions();break;case a:e.getTransactions()}})),_clearTransactions:Object(m.b)((function(e){e.items=[]}))},Q={isOpen:!1,setOpen:Object(m.b)((function(e,t){e.isOpen=t})),open:Object(m.b)((function(e){e.isOpen=!0})),close:Object(m.b)((function(e){e.isOpen=!1}))},X=n(386),Z=n(204),ee=n(387),te=n(205),ne=n(388),re=n(389),ae=n(408),ie={transactions:$,interval:{startDate:X.a(new Date),endDate:Z.a(new Date),setStartDate:Object(m.b)((function(e,t){if(K(t,">",e.endDate))throw new Error("Start date cannot be after end date");e.startDate=t})),setEndDate:Object(m.b)((function(e,t){if(K(t,"<",e.startDate))throw new Error("End date cannot be before start date");e.endDate=t})),setInterval:Object(m.b)((function(e,t){if(K(t.startDate,">",t.endDate))throw new Error("End date cannot be before start date");e.startDate=t.startDate,e.endDate=t.endDate})),setPreviousMonthAsDateInterval:Object(m.b)((function(e){var t=X.a(e.startDate),n=ee.a(t,1);e.startDate=X.a(n),e.endDate=Z.a(n)})),setNextMonthAsDateInterval:Object(m.b)((function(e){var t=Z.a(e.endDate),n=te.a(t,1);e.startDate=X.a(n),e.endDate=Z.a(n)})),dateIntervalIsMonth:Object(m.c)((function(e){return ne.a(e.startDate,e.endDate)&&re.a(e.startDate)&&ae.a(e.endDate)})),dateIntervalMonthString:Object(m.c)((function(e){if(e.dateIntervalIsMonth){var t=e.startDate.toLocaleDateString("en-EN",{month:"long"}),n=e.startDate.toLocaleDateString("en-EN",{year:"numeric"});return"".concat(t,", ").concat(n)}}))},transactionForm:Q,auth:M},oe=Object(m.d)(ie);var ce=Object(m.e)(),se=ce.useStoreActions,ue=(ce.useStoreDispatch,ce.useStoreState),le=(ce.useStore,function(e){var t,n,r=Object(f.c)({resolver:Object(d.a)(de)}),i=r.register,o=r.handleSubmit,c=r.errors,s=r.formState,m=se((function(e){return e.auth.forgotPassword})),p=s.touched.email&&(null===(t=c.email)||void 0===t?void 0:t.message),h=s.touched.password&&(null===(n=c.password)||void 0===n?void 0:n.message);return a.a.createElement("div",{className:"LoginView"},a.a.createElement("form",{onSubmit:o(e.handleSubmit)},a.a.createElement("input",{id:"login-email",name:"email",type:"text",ref:i}),a.a.createElement("p",{style:{color:"#FF6622"}},p),a.a.createElement("input",{id:"login-password",name:"password",type:"password",ref:i}),a.a.createElement("p",{style:{color:"#FF6622"}},h),a.a.createElement("button",{type:"submit"},"Log in")),a.a.createElement("p",null,"or"),a.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.handleGoogleSubmit()}},a.a.createElement("button",{type:"submit"},"Log in with Google")),a.a.createElement("button",{onClick:Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{m({email:"jussi@nevavuori.fi"})}catch(t){console.log("Failed with error:",t)}case 1:case"end":return e.stop()}}),e)})))},"Forgot password?"))});function fe(){var e=Object(c.g)();return function(t){return e.push("string"===typeof t?t:t(ot))}}var de=N.b({email:N.d().defined().min(3).max(255).email(),password:N.d().defined().min(3).max(255)}).defined(),me=function(){var e=fe(),t=se((function(e){return e.auth.loginWithGoogle})),n=se((function(e){return e.auth.loginWithEmailPassword}));function r(){return(r=Object(l.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(r);case 3:e((function(e){return e.dashboard})),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}function i(){return(i=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.createElement(le,{handleGoogleSubmit:function(){return i.apply(this,arguments)},handleSubmit:function(e){return r.apply(this,arguments)}})},pe=function(e){var t,n,r,i=Object(f.c)({resolver:Object(d.a)(he)}),o=i.register,c=i.handleSubmit,s=i.errors,u=i.formState,l=u.touched.email&&(null===(t=s.email)||void 0===t?void 0:t.message),m=u.touched.password&&(null===(n=s.password)||void 0===n?void 0:n.message),p=u.touched.repeatPassword&&(null===(r=s.repeatPassword)||void 0===r?void 0:r.message);return a.a.createElement("form",{onSubmit:c(e.handleSubmit)},a.a.createElement("input",{id:"register-email",name:"email",type:"text",ref:o}),a.a.createElement("p",{style:{color:"#FF6622"}},l),a.a.createElement("input",{id:"register-password",name:"password",type:"password",ref:o}),a.a.createElement("p",{style:{color:"#FF6622"}},m),a.a.createElement("input",{id:"register-repeat-password",name:"repeatPassword",type:"password",ref:o}),a.a.createElement("p",{style:{color:"#FF6622"}},p),a.a.createElement("button",{type:"submit"},"Register"))},he=Object(N.b)({email:Object(N.d)().defined().max(255).email(),password:Object(N.d)().defined().min(5).max(255),repeatPassword:Object(N.d)().defined().oneOf([Object(N.c)("password")],"passwords must match")}).defined(),ve=function(){var e=se((function(e){return e.auth.registerWithEmailPassword}));function t(){return(t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({email:n.email,password:n.password});case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return a.a.createElement(pe,{handleSubmit:function(e){return t.apply(this,arguments)}})},be=(n(355),n(356),n(47)),ge=n.n(be),Ee=n(390),we=n(391),ye=n(392),je=n(393),Oe=n(394);function ke(e){var t=Object(r.useMemo)((function(){return window.matchMedia(e)}),[e]),n=Object(r.useState)(!1),a=Object(F.a)(n,2),i=a[0],o=a[1],c=Object(r.useCallback)((function(){o(t.matches)}),[t]);return Object(r.useEffect)((function(){return c(),t.addEventListener("change",c),function(){t.removeEventListener("change",c)}}),[t,c]),i}function xe(){var e=fe(),t=se((function(e){return e.transactionForm.open})),n=ke("(min-width: ".concat(600,"px)")),r=Object(c.h)(ot.dashboard),i=Object(c.h)(ot.analytics),o=Object(c.h)(ot.budget),s=Object(c.h)(ot.settings);return a.a.createElement("div",{className:"AppTabs"},a.a.createElement("div",{className:"tabContainer"},a.a.createElement("button",{onClick:function(){return e((function(e){return e.dashboard}))},className:ge()("tab",{active:!!r})},a.a.createElement(Ee.a,null),a.a.createElement("span",null,"Dashboard")),a.a.createElement("button",{onClick:function(){return e((function(e){return e.analytics}))},className:ge()("tab",{active:!!i})},a.a.createElement(we.a,null),a.a.createElement("span",null,"Analytics")),n?a.a.createElement("button",{onClick:function(){return t()},className:ge()("tab","addTab")},a.a.createElement(ye.a,null),a.a.createElement("span",null,"New transaction")):a.a.createElement("div",{className:"plusButtonContainer"},a.a.createElement("svg",{version:"1.1",x:"0px",y:"0px",width:"108px",height:"60px",viewBox:"0 0 108 60"},a.a.createElement("path",{d:De})),a.a.createElement("button",{onClick:function(){return t()},className:"plusButton"},a.a.createElement(ye.a,null))),a.a.createElement("button",{onClick:function(){return e((function(e){return e.budget}))},className:ge()("tab",{active:!!o})},a.a.createElement(je.a,null),a.a.createElement("span",null,"Budget")),a.a.createElement("button",{onClick:function(){return e((function(e){return e.settings}))},className:ge()("tab",{active:!!s})},a.a.createElement(Oe.a,null),a.a.createElement("span",null,"Settings"))))}var De="M80.2,23.4C72.9,30.7,64.4,35,54,35s-18.9-4.3-26.2-11.6C20.5,16.1,10,0,0,0v60h54h54V0C98, 0, 87.5, 16.1, 80.2, 23.4z",Se=(n(357),n(406));function Te(e){var t,n,r,i=Object(f.c)({resolver:Object(d.a)(Ne)}),o=i.register,c=i.handleSubmit,s=i.errors,u=i.formState,l=u.touched.integerAmount&&(null===(t=s.integerAmount)||void 0===t?void 0:t.message),m=u.touched.category&&(null===(n=s.category)||void 0===n?void 0:n.message),p=u.touched.comment&&(null===(r=s.comment)||void 0===r?void 0:r.message);return a.a.createElement(Se.a,{open:e.open,onClose:function(){return e.handleClose()}},a.a.createElement("div",{className:"TransactionFormModal"},a.a.createElement("form",{onSubmit:c(e.handleSubmit)},a.a.createElement("p",null,"Integer amount"),a.a.createElement("input",{type:"number",id:"integerAmount",name:"integerAmount",ref:o}),a.a.createElement("p",{style:{color:"#FF6622"}},l),a.a.createElement("p",null,"Category"),a.a.createElement("input",{type:"text",id:"category",name:"category",ref:o}),a.a.createElement("p",{style:{color:"#FF6622"}},m),a.a.createElement("p",null,"Comment"),a.a.createElement("input",{type:"text",id:"comment",name:"comment",ref:o}),a.a.createElement("p",{style:{color:"#FF6622"}},p),a.a.createElement("button",{type:"submit"},"submit"))))}var Ne=Object(N.b)({comment:Object(N.d)(),category:Object(N.d)().required(),integerAmount:Object(N.a)().required().integer()}).required();function Ae(e){var t=ue((function(e){return e.transactionForm.isOpen})),n=se((function(e){return e.transactionForm.open})),i=se((function(e){return e.transactionForm.close})),o=se((function(e){return e.transactions.postTransaction}));return function(e,t,n){var a=Object(r.useCallback)((function(n){var r="object"===typeof e?e.key:e;n.key!==r&&n.keyCode!==r||("object"===typeof e&&void 0!==e.shift&&e.shift!==n.shiftKey||"object"===typeof e&&void 0!==e.alt&&e.alt!==n.altKey||("object"!==typeof e||void 0===e.ctrl||e.ctrl===n.ctrlKey)&&t())}),[e,t]);Object(r.useEffect)((function(){var e=!0===(null===n||void 0===n?void 0:n.if)||void 0===(null===n||void 0===n?void 0:n.if),t=!0===(null===n||void 0===n?void 0:n.ifNot)||void 0===(null===n||void 0===n?void 0:n.ifNot);if(e&&t)return Boolean(null===n||void 0===n?void 0:n.onKeyUp)?(window.addEventListener("keyup",a),function(){return window.removeEventListener("keyup",a)}):(window.addEventListener("keydown",a),function(){return window.removeEventListener("keydown",a)})}),[n,a])}({key:32,shift:!1,ctrl:!0,alt:!1},Object(r.useCallback)((function(){n()}),[n])),a.a.createElement(Te,{open:t,handleClose:function(){i()},handleSubmit:function(e){o(Object(E.a)(Object(E.a)({},e),{},{time:Date.now()}))}})}function Ce(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ae,null),a.a.createElement("div",{className:"AppLayout"},a.a.createElement("div",{className:"appTabsContainer"},a.a.createElement(xe,null)),a.a.createElement("div",{className:"childrenContainer"},e.children)))}var Ie=n(212);function Me(e){var t=e.fallbackRoute,n=Object(Ie.a)(e,["fallbackRoute"]),r=ot.login,i=ue((function(e){return e.auth.initialized})),o=ue((function(e){return e.auth.isLoggedIn}));return i?o?a.a.createElement(c.b,n):a.a.createElement(c.a,{to:t||r}):null}n(358),n(359),n(360);var Fe=n(396);function Pe(e){var t=e.transaction.amount.isPositive?"positive":"negative";return a.a.createElement("div",{className:"TransactionListing"},a.a.createElement("div",{className:ge()("icon",t)},a.a.createElement("div",{className:"iconContainer"},e.transaction.amount.isPositive?a.a.createElement(ye.a,null):a.a.createElement(Fe.a,null))),a.a.createElement("div",{className:"category"},a.a.createElement("span",null,e.transaction.category)),a.a.createElement("div",{className:"comment"},a.a.createElement("span",null,e.transaction.comment)),a.a.createElement("div",{className:ge()("amount",t)},a.a.createElement("span",null,e.transaction.amount.formatFull)))}function Le(e){var t=se((function(e){return e.transactions.deleteTransaction})),n=Object(r.useCallback)((function(){t(e.transaction.id)}),[e.transaction,t]);return a.a.createElement(Pe,{transaction:e.transaction,handleDelete:n})}var _e=n(405);function qe(e){var t=se((function(e){return e.transactions.deleteTransaction}));return a.a.createElement("div",{className:"TransactionList"},a.a.createElement("ul",null,e.itemsByDates.map((function(e){var n,r=(n=e.date).getFullYear()===Re?Object(_e.a)(n,"dd.MM."):Object(_e.a)(n,"dd.MM.yyyy");return a.a.createElement("li",{key:r},a.a.createElement("p",null,r),a.a.createElement("ul",null,e.items.map((function(e){return a.a.createElement("li",{key:e.id,onClick:function(){t(e.id).catch((function(e){console.log("Error deleting:",e)}))}},a.a.createElement(Le,{transaction:e}))}))))}))))}var Re=(new Date).getFullYear();function Be(e){var t=ue((function(e){return e.transactions.itemsByDates})),n=ue((function(e){return e.transactions.filtered.itemsByDates}));return a.a.createElement(qe,{itemsByDates:e.bypassFilters?t:n})}var Ue=n(402),We=n(403),ze=(n(361),n(397)),Ge=n(366),Ve=n(399),Ke=n(400),Je=n(401);function Ye(e){return a.a.createElement("div",{className:"TransactionListFilters"},a.a.createElement("div",{className:"left"},a.a.createElement(ze.a,{size:"small"},a.a.createElement(Ge.a,{size:"small",variant:"outlined",onClick:e.onPreviousMonth},a.a.createElement(Ve.a,null)),a.a.createElement(Ge.a,{size:"small",variant:"outlined",onClick:e.onNextMonth},a.a.createElement(Ke.a,null)))),a.a.createElement("div",{className:"right"},a.a.createElement(Ge.a,{variant:"outlined"},a.a.createElement("span",null,"Filter"),a.a.createElement(Je.a,null))))}function He(e){var t=se((function(e){return e.interval.setNextMonthAsDateInterval})),n=se((function(e){return e.interval.setPreviousMonthAsDateInterval}));return a.a.createElement(Ye,{onNextMonth:function(){t()},onPreviousMonth:function(){n()}})}var $e=n(209),Qe=n.n($e),Xe={};function Ze(e){return a.a.createElement("div",{className:"DashboardTab"},a.a.createElement("header",null,a.a.createElement("img",{src:Qe.a,alt:""}),a.a.createElement("h1",null,e.dateIntervalMonthString),a.a.createElement("div",{className:"totals"},a.a.createElement("h2",{className:Xe.totalHeader},a.a.createElement("span",null,e.filteredSum.formatSign+" "),a.a.createElement("span",{className:Xe.larger},e.filteredSum.formatEuros),a.a.createElement("span",null,"."+e.filteredSum.formatCents+" \u20ac")),a.a.createElement("div",{className:"subtotals"},a.a.createElement("div",{className:"subtotal"},a.a.createElement(Ue.a,null),a.a.createElement("span",null,e.filteredIncomesSum.formatFull)),a.a.createElement("div",{className:"subtotal"},a.a.createElement(We.a,null),a.a.createElement("span",null,e.filteredExpensesSum.formatFull))))),a.a.createElement("main",null,a.a.createElement("div",{className:"filters"},a.a.createElement(He,null)),a.a.createElement("div",{className:"list"},a.a.createElement(Be,null))))}function et(){var e=ue((function(e){return e.auth.user})),t=ue((function(e){return e.interval.dateIntervalIsMonth})),n=ue((function(e){return e.interval.dateIntervalMonthString})),r=ue((function(e){return e.transactions.filtered.sums})),i=se((function(e){return e.interval.setNextMonthAsDateInterval})),o=se((function(e){return e.interval.setPreviousMonthAsDateInterval}));return e?a.a.createElement(Ze,{dateIntervalIsMonth:t,dateIntervalMonthString:n,setNextMonthAsDateInterval:function(){return i()},setPreviousMonthAsDateInterval:function(){return o()},filteredSum:r.all,filteredIncomesSum:r.incomes,filteredExpensesSum:r.expenses,user:e}):null}n(362);function tt(e){return a.a.createElement("div",{className:"SettingsTab"},e.user.photoUrl?a.a.createElement("img",{style:{width:64,height:64},alt:"profile",src:e.user.photoUrl}):null,a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"Display name"),a.a.createElement("td",null,e.user.displayName)),a.a.createElement("tr",null,a.a.createElement("td",null,"Email"),a.a.createElement("td",null,e.user.email)),a.a.createElement("tr",null,a.a.createElement("td",null,"ID"),a.a.createElement("td",null,e.user.id)),a.a.createElement("tr",null,a.a.createElement("td",null,"Google ID"),a.a.createElement("td",null,e.user.googleId)))),a.a.createElement("button",{onClick:e.handleLogout},"Log out"))}function nt(e){var t=ue((function(e){return e.auth.user})),n=se((function(e){return e.auth.logout}));return t?a.a.createElement(tt,{user:t,handleLogout:function(){n()}}):null}var rt=n(89);n(363);function at(e){var t=Object(r.useState)([]),n=Object(F.a)(t,2),i=n[0],o=n[1],c=se((function(e){return e.transactions.postTransaction}));return a.a.createElement("div",{className:"AnalyticsTab"},a.a.createElement("input",{type:"file",accept:".csv",onChange:function(e){if(console.log("Handling change"),!e.target.files)throw new Error("No files array");var t=e.target.files[0];if(!t)throw new Error("No file");var n=new FileReader;n.addEventListener("load",(function(e){if(!e.target)throw new Error("No load event target");if(!e.target.result)throw new Error("Load event target result is null");var t,n=e.target.result.toString().split("\n"),r=Object(rt.a)(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a){var i=a.split(";");c({category:i[1],comment:i[3],integerAmount:Number(i[2].replace(/[^\d-]/g,"")),time:new Date(i[0].split(".").reverse().map((function(e){return e.padStart(2,"0")})).join("-")).getTime()})}}}catch(s){r.e(s)}finally{r.f()}o([])})),n.readAsText(t)}}),a.a.createElement("ul",null,i.map((function(e){return a.a.createElement("li",{key:e.id},e.date.toDateString(),": ",e.amount.formatFull," ",e.category," - ",e.comment)}))))}function it(e){return a.a.createElement(at,null)}var ot={approot:"/app",dashboard:"/app/dashboard",analytics:"/app/analytics",budget:"/app/budget",settings:"/app/settings",login:"/",register:"/register"};function ct(){return a.a.createElement(c.d,null,a.a.createElement(c.b,{exact:!0,path:ot.login},a.a.createElement(me,null)),a.a.createElement(c.b,{exact:!0,path:ot.register},a.a.createElement(ve,null)),a.a.createElement(Me,{exact:!0,path:ot.dashboard},a.a.createElement(Ce,null,a.a.createElement(et,null))),a.a.createElement(Me,{exact:!0,path:ot.analytics},a.a.createElement(Ce,null,a.a.createElement(it,null))),a.a.createElement(Me,{exact:!0,path:ot.budget},a.a.createElement(Ce,null,a.a.createElement("p",null,"Budget placeholder"))),a.a.createElement(Me,{exact:!0,path:ot.settings},a.a.createElement(Ce,null,a.a.createElement(nt,null))),a.a.createElement(c.b,{exact:!0,path:"/v"},"Version number 0.0.1"),a.a.createElement(c.b,{path:"/"},a.a.createElement(c.a,{to:ot.dashboard})))}var st=function(){var e=se((function(e){return e.auth.getProfile}));return Object(r.useEffect)((function(){e()}),[e]),a.a.createElement(ct,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ut=n(61),lt=n(404),ft=n(210);function dt(e,t){var n=getComputedStyle(document.documentElement).getPropertyValue("--"+e);return t&&t.color,n}var mt=Object(ft.a)({palette:{primary:{main:dt("color-primary-main",{color:!0}),dark:dt("color-primary-dark",{color:!0}),light:dt("color-primary-light",{color:!0}),50:dt("color-primary-50",{color:!0}),100:dt("color-primary-100",{color:!0}),200:dt("color-primary-200",{color:!0}),300:dt("color-primary-300",{color:!0}),400:dt("color-primary-400",{color:!0}),500:dt("color-primary-500",{color:!0}),600:dt("color-primary-600",{color:!0}),700:dt("color-primary-900",{color:!0}),800:dt("color-primary-700",{color:!0}),900:dt("color-primary-700",{color:!0})}}});o.a.render(a.a.createElement(m.a,{store:oe},a.a.createElement(lt.a,{theme:mt},a.a.createElement(a.a.StrictMode,null,a.a.createElement(ut.a,null,a.a.createElement(st,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[215,1,2]]]);
//# sourceMappingURL=main.871a85f3.chunk.js.map