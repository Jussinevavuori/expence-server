(this.webpackJsonpexpence=this.webpackJsonpexpence||[]).push([[0],{391:function(e,t){},392:function(e,t,n){e.exports=n.p+"static/media/logo_google.696b80ec.png"},410:function(e,t,n){e.exports=n.p+"static/media/pexels-johannes-plenio-1103970.afe78909.jpg"},423:function(e,t,n){e.exports=n(595)},424:function(e,t,n){},425:function(e,t,n){},431:function(e,t,n){},432:function(e,t,n){},433:function(e,t,n){},456:function(e,t){},458:function(e,t){},472:function(e,t){},474:function(e,t){},502:function(e,t){},504:function(e,t){},505:function(e,t){},511:function(e,t){},513:function(e,t){},531:function(e,t){},533:function(e,t){},545:function(e,t){},548:function(e,t){},566:function(e,t,n){},567:function(e,t,n){},568:function(e,t,n){},569:function(e,t,n){},579:function(e,t,n){},580:function(e,t,n){},581:function(e,t,n){},582:function(e,t,n){},583:function(e,t,n){},584:function(e,t,n){},586:function(e,t){},587:function(e,t){},588:function(e,t,n){},589:function(e,t,n){},590:function(e,t,n){},591:function(e,t,n){},592:function(e,t,n){},593:function(e,t,n){},594:function(e,t,n){},595:function(e,t,n){"use strict";n.r(t);n(424),n(425);var a=n(0),r=n.n(a),o=n(23),i=n.n(o),c=n(37),u=n(3),s=n.n(u),l=n(10),m=n(14),f=n(68),d=(n(431),n(51)),p=n(84),v=n(628),h=n(630),b=n(632),g=n(635),E=n(392),y=n.n(E),w=n(631),k=n(633),O=n(634),x=(n(432),n(433),n(47)),j=n.n(x),C=n(596);function S(e){var t=e.condensed,n=e.className,a=e.color,o=Object(f.a)(e,["condensed","className","color"]);return r.a.createElement(C.a,Object.assign({},o,{color:function(){switch(a){case"white":case"black":return;default:return a}}(),className:j()(n,"Type",{condensed:t},"color-".concat(String(a)))}))}var D=n(627);function N(e){return r.a.createElement("div",{className:"AuthFrame"},r.a.createElement("div",{className:"container"},r.a.createElement("header",null,r.a.createElement(S,{variant:"h5",component:"h1",color:"white"},e.header)),r.a.createElement("div",{className:"content"},e.body,e.footer?r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,null),r.a.createElement("footer",null,e.footer)):null)))}var A=function(e){var t,n,o=Object(a.useState)(!1),i=Object(m.a)(o,2),c=i[0],u=i[1],s=Object(d.c)({resolver:Object(p.a)(Me)}),l=s.register,E=s.handleSubmit,x=s.errors,j=s.formState,C=(Object(f.a)(s,["register","handleSubmit","errors","formState"]),j.touched.email&&(null===(t=x.email)||void 0===t?void 0:t.message)),D=j.touched.password&&(null===(n=x.password)||void 0===n?void 0:n.message);return r.a.createElement("div",{className:"Login"},r.a.createElement(N,{header:"Login to Expence",body:r.a.createElement("form",{noValidate:!0,onSubmit:E(e.handleSubmit)},r.a.createElement(v.a,{id:"login-email",name:"email",type:"text",inputRef:l,label:"Email",variant:"outlined",error:!!C,helperText:C,fullWidth:!0,InputProps:{endAdornment:r.a.createElement(h.a,{position:"end"},r.a.createElement(w.a,null))}}),r.a.createElement(v.a,{id:"login-password",name:"password",type:c?"text":"password",inputRef:l,label:"Password",variant:"outlined",error:!!D,helperText:D,fullWidth:!0,InputProps:{endAdornment:r.a.createElement(h.a,{position:"end"},r.a.createElement(b.a,{onClick:function(){return u((function(e){return!e}))},size:"small"},c?r.a.createElement(k.a,null):r.a.createElement(O.a,null)))}}),r.a.createElement(g.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0},"Login"),e.error?r.a.createElement(S,{color:"error"},e.error):null,r.a.createElement(g.a,{variant:"outlined",onClick:function(){return e.handleGoogleSubmit()},startIcon:r.a.createElement("img",{className:"logo",src:y.a,alt:"Google Logo"}),fullWidth:!0},"Log in with Google")),footer:r.a.createElement("div",{className:"footerContent"},r.a.createElement(g.a,{onClick:function(){return e.handleCreateAccount()}},"Create account"),r.a.createElement(g.a,{onClick:function(){return e.handleForgotPassword()}},"Forgot password"))}))},T=n(29),I=n(11),P=n(42),F=n(43),R=function(){function e(t){var n,a,r,o;Object(P.a)(this,e),this.id=void 0,this.displayName=void 0,this.email=void 0,this.photoUrl=void 0,this.googleId=void 0,this.id=t.id,this.displayName=null!==(n=t.displayName)&&void 0!==n?n:void 0,this.email=null!==(a=t.email)&&void 0!==a?a:void 0,this.photoUrl=null!==(r=t.photoUrl)&&void 0!==r?r:void 0,this.googleId=null!==(o=t.googleId)&&void 0!==o?o:void 0}return Object(F.a)(e,[{key:"toJson",value:function(){return{id:this.id,displayName:this.displayName,email:this.email,googleId:this.googleId,photoUrl:this.photoUrl}}}],[{key:"isJson",value:function(t){try{return e.JsonSchema.isValidSync(t),!0}catch(n){return!1}}}]),e}();R.JsonSchema=Object(T.b)({id:Object(T.c)().required().min(1),displayName:Object(T.c)(),photoUrl:Object(T.c)(),email:Object(T.c)(),googleId:Object(T.c)()}).required();var _=n(182),W=n(181),M=n(54),L=n(401),q=n.n(L),U=function(){function e(){Object(P.a)(this,e)}return Object(F.a)(e,null,[{key:"API_URL",get:function(){return"https://expenceapp.herokuapp.com"}}]),e}(),Y=n(402),B=n.n(Y),z=function(){function e(t){Object(P.a)(this,e),this.value=void 0,this.value=t}return Object(F.a)(e,[{key:"getOr",value:function(e){return this.value}},{key:"isSuccess",value:function(){return!0}},{key:"isFailure",value:function(){return!1}},{key:"onSuccess",value:function(e){return e(this.value),this}},{key:"onFailure",value:function(e){return this}}],[{key:"From",value:function(t){return new e(t)}},{key:"Empty",value:function(){return new e(void 0)}}]),e}(),J=function(){function e(t,n){var a,r,o;Object(P.a)(this,e),this.message=void 0,this.status=void 0,this.code=void 0,this.details=void 0,this.value=void 0,this.details={message:null!==(a=null===n||void 0===n?void 0:n.message)&&void 0!==a?a:"Unknown failure.",status:null!==(r=null===n||void 0===n?void 0:n.status)&&void 0!==r?r:0,code:null!==(o=null===n||void 0===n?void 0:n.code)&&void 0!==o?o:"failure/unknown"},this.message=this.details.message,this.status=this.details.status,this.code=this.details.code,this.value=t}return Object(F.a)(e,[{key:"getOr",value:function(e){return e}},{key:"onSuccess",value:function(e){return this}},{key:"onFailure",value:function(e){return e(this),this}},{key:"isSuccess",value:function(){return!1}},{key:"isFailure",value:function(){return!0}}],[{key:"AxiosError",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){if(t.response){var n=t.response.data;return new e((null===n||void 0===n?void 0:n.errors)&&"object"===typeof n.errors?{errors:n.errors}:{},{status:t.response.status,message:(null===n||void 0===n?void 0:n.message)&&"string"===typeof n.message?n.message:"Unknown server error",code:(null===n||void 0===n?void 0:n.code)&&"string"===typeof n.code?n.code:"server/unknown"})}return t.request?new e({},{status:21,code:"server/unavailable",message:"Could not reach server"}):new e({},{status:22,code:"server/failure-formulating-request",message:"Could not formulate request to server"})}))},{key:"InvalidResponse",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"failure",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new e({response:t},{status:23,code:"".concat(n,"/invalid-response"),message:"".concat(a," Invalid response from server.").trim()})}},{key:"Unimplemented",value:function(){return new e(void 0,{code:"failure/unimplemented",message:"Unimplemented feature",status:2})}},{key:"Error",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){return new e(t,{message:t.message,code:"error/".concat(t.name),status:1})}))},{key:"Unknown",value:function(){return new e(void 0)}}]),e}();function V(e){return e.then((function(e){return new z(e)})).catch((function(e){return new J(e)}))}function G(e){var t=e();return t instanceof Promise?t.then((function(e){return e instanceof z?new z(e.value):new J(e.value,e.details)})):t instanceof z?new z(t.value):new J(t.value,t.details)}var H=function(){function e(){Object(P.a)(this,e)}return Object(F.a)(e,null,[{key:"endpoint",value:function(t){return"".concat(e.baseURL).concat(t)}},{key:"isAccessTokenValid",value:function(){var e=Pe.getState().auth.accessToken;if(!e)return!1;try{var t=B.a.decode(e),n=1e3*Number((null===t||void 0===t?void 0:t.exp)||0);return Date.now()<n-5e3}catch(a){return console.warn("Error occured while checking access token",a),!1}}},{key:"attemptRefreshAccessToken",value:function(){var t=Object(l.a)(s.a.mark((function t(){var n,a,r,o,i=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.length>0&&void 0!==i[0]&&i[0],e.isAccessTokenValid()&&!n){t.next=15;break}return a=e.endpoint("/auth/refresh_token"),t.prev=4,t.next=7,e.axios.get(a);case 7:r=t.sent,o=r.data,Pe.getActions().auth._setAccessToken(o),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),Pe.getState().auth.accessToken&&Pe.getActions().auth.logout();case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}()},{key:"onBeforeRequest",value:function(){var t=Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.attemptRefreshAccessToken();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getConfig",value:function(e){var t=Pe.getState().auth.accessToken,n=Object(M.a)({},null===e||void 0===e?void 0:e.headers);return t&&(n.Authorization="bearer ".concat(t)),Object(M.a)(Object(M.a)({},e),{},{headers:n})}},{key:"handleRequest",value:function(){var t=Object(l.a)(s.a.mark((function t(n,a,r){var o,i,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onBeforeRequest();case 2:return o=e.endpoint(n),i=e.getConfig(a),c=r(o,i),t.abrupt("return",G(Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(c);case 2:if(!(t=e.sent).isSuccess()){e.next=7;break}return e.abrupt("return",t);case 7:return e.abrupt("return",J.AxiosError(t.value));case 8:case"end":return e.stop()}}),e)})))));case 6:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"get",value:function(){var t=Object(l.a)(s.a.mark((function t(n,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.handleRequest(n,a,(function(t,n){return e.axios.get(t,n)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"post",value:function(){var t=Object(l.a)(s.a.mark((function t(n,a,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.handleRequest(n,r,(function(t,n){return e.axios.post(t,a,n)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"delete",value:function(){var t=Object(l.a)(s.a.mark((function t(n,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.handleRequest(n,a,(function(t,n){return e.axios.delete(t,n)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"put",value:function(){var t=Object(l.a)(s.a.mark((function t(n,a,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.handleRequest(n,r,(function(t,n){return e.axios.put(t,a,n)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"patch",value:function(){var t=Object(l.a)(s.a.mark((function t(n,a,r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.handleRequest(n,r,(function(t,n){return e.axios.patch(t,a,n)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()}]),e}();H.baseURL="".concat(U.API_URL,"/api"),H.axios=q.a.create({baseURL:H.baseURL,withCredentials:!0});var Z=function(e){Object(_.a)(n,e);var t=Object(W.a)(n);function n(){return Object(P.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,null,[{key:"getProfile",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.get("/auth/profile");case 2:if(!(t=e.sent).isFailure()){e.next=7;break}return e.abrupt("return",t);case 7:if(!R.isJson(t.value)){e.next=11;break}return e.abrupt("return",new z(t.value));case 11:return e.abrupt("return",J.InvalidResponse(t.value,"auth/profile","Could not get profile."));case 12:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"registerWithEmailAndPassword",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.post("/auth/register",t);case 2:if(!(n=e.sent).isFailure()){e.next=7;break}return e.abrupt("return",n);case 7:if(200!==n.value.status){e.next=11;break}return e.abrupt("return",z.Empty());case 11:return e.abrupt("return",J.InvalidResponse(n.value,"auth/register","Could not register."));case 12:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginWithEmailAndPassword",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.post("/auth/login",t);case 2:if(!(n=e.sent).isFailure()){e.next=7;break}return e.abrupt("return",n);case 7:if(200!==n.value.status){e.next=11;break}return e.abrupt("return",z.Empty());case 11:return e.abrupt("return",J.InvalidResponse(n.value,"auth/login","Could not login."));case 12:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"forgotPassword",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.post("/auth/forgot_password",t);case 2:if(!(n=e.sent).isFailure()){e.next=7;break}return e.abrupt("return",n);case 7:if(200!==n.value.status){e.next=11;break}return e.abrupt("return",z.Empty());case 11:return e.abrupt("return",J.InvalidResponse(n.value,"auth/forgot-password","Could not send forgot password link."));case 12:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"validatePasswordChangeToken",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.get("/auth/change_password/".concat(t.token));case 2:if(!(n=e.sent).isFailure()){e.next=7;break}return e.abrupt("return",n);case 7:if(200!==n.value.status||!n.value.data||"string"!==typeof n.value.data){e.next=11;break}return e.abrupt("return",new z(n.value.data));case 11:return e.abrupt("return",J.InvalidResponse(n.value,"auth/change-password","Could not valildate password change token."));case 12:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"changePassword",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.post("/auth/change_password/".concat(t.token),{password:t.password});case 2:if(!(n=e.sent).isFailure()){e.next=7;break}return e.abrupt("return",n);case 7:if(200!==n.value.status){e.next=11;break}return e.abrupt("return",z.Empty());case 11:return e.abrupt("return",J.InvalidResponse(n.value,"auth/change-password","Could not change password."));case 12:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestConfirmationEmail",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.post("/auth/request_confirm_email",t);case 2:if(!(n=e.sent).isFailure()){e.next=7;break}return e.abrupt("return",n);case 7:if(200!==n.value.status){e.next=11;break}return e.abrupt("return",z.Empty());case 11:return e.abrupt("return",J.InvalidResponse(n.value,"auth/request-confirm-email","Unable to get new confirmation email"));case 12:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"confirmEmail",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.get("/auth/confirm_email/".concat(t.token));case 2:if(!(n=e.sent).isFailure()){e.next=7;break}return e.abrupt("return",n);case 7:if(200!==n.value.status){e.next=11;break}return e.abrupt("return",z.Empty());case 11:return e.abrupt("return",J.InvalidResponse(n.value,"auth/confirm-email","Could not confirm email."));case 12:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.post("/auth/logout");case 2:if(!(t=e.sent).isFailure()){e.next=7;break}return e.abrupt("return",t);case 7:if(200!==t.value.status){e.next=11;break}return e.abrupt("return",z.Empty());case 11:return e.abrupt("return",J.InvalidResponse(t.value,"auth/logout","Could not log out."));case 12:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loginWithGoogle",value:function(){window.location.href=H.endpoint("/auth/google")}}]),n}(H),$={initialized:!1,_setInitialized:Object(I.b)((function(e,t){e.initialized=t})),user:null,isLoggedIn:Object(I.c)((function(e){return Boolean(e.user)})),accessToken:null,_setAccessToken:Object(I.b)((function(e,t){e.accessToken=t})),_login:Object(I.b)((function(e,t){R.isJson(t)&&(e.user=new R(t))})),_logout:Object(I.b)((function(e){e.user=null,e.accessToken=null})),getProfile:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.getProfile();case 2:return(a=e.sent).onSuccess((function(e){t._login(e)})),t._setInitialized(!0),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),loginWithGoogle:Object(I.f)((function(e,t){return Z.loginWithGoogle()})),loginWithEmailPassword:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.loginWithEmailAndPassword(n);case 2:return(a=e.sent).onSuccess(Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.getProfile();case 2:e.sent.onSuccess((function(e){t._login(e)}));case 4:case"end":return e.stop()}}),e)})))),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),registerWithEmailPassword:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.registerWithEmailAndPassword(n);case 2:if(!(a=e.sent).isSuccess()){e.next=8;break}return e.next=6,Z.getProfile();case 6:e.sent.onSuccess((function(e){t._login(e)}));case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),forgotPassword:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.forgotPassword(n);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),validateChangePasswordToken:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.validatePasswordChangeToken(n);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),changePassword:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.changePassword(n);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),confirmEmail:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.confirmEmail(n);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),requestConfirmationEmail:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.requestConfirmationEmail(n);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),logout:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.logout();case 2:return(a=e.sent).onSuccess((function(){t._logout()})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},K=n(669),Q=function(){function e(t){if(Object(P.a)(this,e),this._value=void 0,Math.trunc(t)!==t)throw new Error("Cannot construct money amount from non-integer value");this._value=t}return Object(F.a)(e,[{key:"format",value:function(){return this.decimalValue.toLocaleString("fi-FI",{style:"currency",currency:"EUR"})}},{key:"add",value:function(t){return new e(this._value+t._value)}},{key:"subtract",value:function(t){return new e(this._value-t._value)}},{key:"value",get:function(){return this._value}},{key:"decimalValue",get:function(){return this._value/100}},{key:"euros",get:function(){return Math.trunc(this._value/100)}},{key:"cents",get:function(){return Math.floor(Math.abs(this._value)%100)}},{key:"sign",get:function(){return 0===this._value?0:this._value>0?1:-1}},{key:"isPositive",get:function(){return this._value>0}},{key:"isNonNegative",get:function(){return this._value>=0}},{key:"isZero",get:function(){return 0===this._value}},{key:"isNonPositive",get:function(){return this._value<=0}},{key:"isNegative",get:function(){return this._value<0}}],[{key:"sum",value:function(t){return t.reduce((function(e,t){return e.add(t)}),new e(0))}}]),e}(),X=function(){function e(t){Object(P.a)(this,e),this.date=void 0,this.category=void 0,this.comment=void 0,this.amount=void 0,this.id=void 0,this.uid=void 0,this.date=new Date(t.time),this.comment=t.comment||"",this.category=t.category,this.amount=new Q(Math.floor(t.integerAmount)),this.id=t.id||K.a(),this.uid=t.uid}return Object(F.a)(e,[{key:"toJson",value:function(){return{time:this.date.getTime(),category:this.category,comment:this.comment,integerAmount:this.amount.value,id:this.id,uid:this.uid}}}],[{key:"isJson",value:function(t){try{return e.JsonSchema.validateSync(t),!0}catch(n){return!1}}},{key:"isJsonArray",value:function(t){return Array.isArray(t)&&t.every(e.isJson)}}]),e}();X.JsonSchema=Object(T.b)({id:Object(T.c)().required(),uid:Object(T.c)().required(),time:Object(T.a)().positive().integer().required(),category:Object(T.c)().min(1).required(),integerAmount:Object(T.a)().integer().required(),comment:Object(T.c)()}).required();var ee=function(e){Object(_.a)(n,e);var t=Object(W.a)(n);function n(){return Object(P.a)(this,n),t.apply(this,arguments)}return Object(F.a)(n,null,[{key:"getTransactions",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.get("/transactions");case 2:if(!(t=e.sent).isFailure()){e.next=7;break}return e.abrupt("return",t);case 7:if(!X.isJsonArray(t.value.data)){e.next=11;break}return e.abrupt("return",new z(t.value.data));case 11:return e.abrupt("return",J.InvalidResponse(t.value,"transactions/get","Could not get transactions."));case 12:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"postTransaction",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.post("/transactions",t);case 2:if(!(n=e.sent).isFailure()){e.next=7;break}return e.abrupt("return",n);case 7:if(!X.isJson(n.value.data)){e.next=11;break}return e.abrupt("return",new z(n.value.data));case 11:return e.abrupt("return",J.InvalidResponse(n.value,"transactions/post","Could not post transaction."));case 12:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteTransaction",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.delete("/transactions/".concat(t));case 2:if(!(n=e.sent).isFailure()){e.next=7;break}return e.abrupt("return",n);case 7:if(200!==n.value.status){e.next=11;break}return e.abrupt("return",z.Empty());case 11:return e.abrupt("return",J.InvalidResponse(n.value,"transactions/delete","Could not delete transaction."));case 12:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"putTransaction",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.put("/transactions/".concat(t.id),t);case 2:if(!(n=e.sent).isFailure()){e.next=7;break}return e.abrupt("return",n);case 7:if(!X.isJson(n.value.data)){e.next=11;break}return e.abrupt("return",new z(n.value.data));case 11:return e.abrupt("return",J.InvalidResponse(n.value,"transactions/put","Could not put transaction"));case 12:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"patchTransaction",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G(Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.patch("/transactions/".concat(t.id),t);case 2:if(!(n=e.sent).isFailure()){e.next=7;break}return e.abrupt("return",n);case 7:if(!X.isJson(n.value.data)){e.next=11;break}return e.abrupt("return",new z(n.value.data));case 11:return e.abrupt("return",J.InvalidResponse(n.value,"transactions/patch","Could not patch transaction."));case 12:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(H),te=n(32),ne=n(30),ae=n(636),re=n(80);function oe(e,t,n){var a=e.reduce((function(e,n){var a,r=function(e){var n=t(e);return ae.a(n,"yyyy-MM-dd")}(n);return Object(M.a)(Object(M.a)({},e),{},Object(te.a)({},r,[].concat(Object(ne.a)(null!==(a=e[r])&&void 0!==a?a:[]),[n])))}),{}),r=Object.entries(a).map((function(e){return{date:re.a(new Date(e[0])),items:e[1]}}));return(null===n||void 0===n?void 0:n.sort)?r.sort((function(e,t){return t.date.getTime()-e.date.getTime()})):r}function ie(e,t,n){var a=ce(e),r=ce(n);switch(t){case"<":return a<r;case"<=":return a<=r;case"==":return a===r;case">=":return a>=r;case">":return a>r}}function ce(e){return 341*e.getFullYear()+31*e.getMonth()+e.getDate()}var ue={items:Object(I.c)([function(e,t){return t.transactions.items},function(e,t){return t.interval.startDate},function(e,t){return t.interval.endDate},function(e,t){return t.filters.searchTerm},function(e,t){return t.filters.minAmount},function(e,t){return t.filters.maxAmount},function(e,t){return t.filters.excludedCategories}],(function(e,t,n,a,r,o,i){return e.filter((function(e){return!ie(e.date,"<",t)&&(!ie(e.date,">",n)&&(!(e.amount.value<r)&&(!(e.amount.value>o)&&(!i.includes(e.category)&&!!(e.amount.format().toLowerCase().includes(a)||e.category.toLowerCase().includes(a)||e.comment.toLowerCase().includes(a))))))}))})),itemsByDates:Object(I.c)([function(e,t){return t.transactions.filtered.items}],(function(e){return oe(e,(function(e){return e.date}),{sort:!0})})),count:Object(I.c)([function(e,t){return t.transactions.filtered.items}],(function(e){return e.length})),sums:Object(I.c)([function(e,t){return t.transactions.filtered.items}],(function(e){var t=e.filter((function(e){return e.amount.isPositive})).reduce((function(e,t){return e+t.amount.value}),0),n=e.filter((function(e){return e.amount.isNegative})).reduce((function(e,t){return e+t.amount.value}),0);return{all:new Q(t+n),incomes:new Q(t),expenses:new Q(n)}}))},se={items:[],itemsByDates:Object(I.c)((function(e){return oe(e.items,(function(e){return e.date}),{sort:!0})})),count:Object(I.c)((function(e){return e.items.length})),sums:Object(I.c)((function(e){var t=e.items.filter((function(e){return e.amount.isPositive})).reduce((function(e,t){return e+t.amount.value}),0),n=e.items.filter((function(e){return e.amount.isNegative})).reduce((function(e,t){return e+t.amount.value}),0);return{all:new Q(t+n),incomes:new Q(t),expenses:new Q(n)}})),filtered:ue,categories:Object(I.c)((function(e){return e.items.map((function(e){return e.category})).filter((function(e,t,n){return n.indexOf(e)===t}))})),minimumAmount:Object(I.c)((function(e){return e.items.reduce((function(e,t){return t.amount.value<e.value?t.amount:e}),new Q(0))})),maximumAmount:Object(I.c)((function(e){return e.items.reduce((function(e,t){return t.amount.value>e.value?t.amount:e}),new Q(0))})),getTransactions:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.getTransactions();case 2:return(a=e.sent).onSuccess((function(e){return t._getTransactions(e)})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_getTransactions:Object(I.b)((function(e,t){e.items=t.map((function(e){return new X(e)}))})),postTransaction:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.postTransaction(n);case 2:return(a=e.sent).onSuccess((function(e){return t._postTransaction(e)})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_postTransaction:Object(I.b)((function(e,t){e.items.push(new X(t))})),deleteTransaction:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.deleteTransaction(n);case 2:return(a=e.sent).onSuccess((function(){return t.deleteTransaction(n)})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_deleteTransaction:Object(I.b)((function(e,t){e.items=e.items.filter((function(e){return e.id!==t}))})),putTransaction:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.putTransaction(n);case 2:return(a=e.sent).onSuccess((function(e){return t._putTransaction(e)})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_putTransaction:Object(I.b)((function(e,t){e.items=e.items.map((function(e){return e.id===t.id?new X(t):e}))})),patchTransaction:Object(I.f)(function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.patchTransaction(n);case 2:return(a=e.sent).onSuccess((function(e){return t._patchTransaction(e)})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_patchTransaction:Object(I.b)((function(e,t){e.items=e.items.map((function(e){return e.id===t.id?new X(t):e}))})),onAuthChanged:Object(I.g)((function(e,t){return[t.auth.logout,t.auth._login]}),(function(e,t){var n=Object(m.a)(t.resolvedTargets,2),a=n[0],r=n[1];switch(t.type){case a:e._clearTransactions();break;case r:e.getTransactions()}})),_clearTransactions:Object(I.b)((function(e){e.items=[]}))},le=n(223),me=n(136),fe=n(137),de=n(224),pe=n(225),ve=n(637),he=n(117),be=n(118),ge=n(638),Ee=n(138),ye=n(405),we=n(639),ke=n(406),Oe=n(640),xe=n(407),je=n(641),Ce=n(642),Se=n(643),De=n(644),Ne=n(415),Ae=new Date(0),Te=new Date(2533707576e5),Ie={transactions:se,interval:{startDate:le.a(new Date),endDate:me.a(new Date),setStartDate:Object(I.b)((function(e,t){if(ie(t,">",e.endDate))throw new Error("Start date cannot be after end date");e.startDate=t})),setEndDate:Object(I.b)((function(e,t){if(ie(t,"<",e.startDate))throw new Error("End date cannot be before start date");e.endDate=t})),setInterval:Object(I.b)((function(e,t){if(ie(t.startDate,">",t.endDate))throw new Error("End date cannot be before start date");e.startDate=t.startDate,e.endDate=t.endDate})),nextInterval:Object(I.b)((function(e){if(!e.isAll){var t=fe.a(e.endDate,1);e.isYear?e.endDate=de.a(t):e.isMonth?e.endDate=me.a(t):e.isWeek?e.endDate=pe.a(t,{weekStartsOn:1}):e.endDate=fe.a(t,e.length),e.startDate=t}})),previousInterval:Object(I.b)((function(e){if(!e.isAll){var t=ve.a(e.startDate,1);e.isYear?e.startDate=he.a(t):e.isMonth?e.startDate=le.a(t):e.isWeek?e.startDate=be.a(t,{weekStartsOn:1}):e.startDate=ve.a(t,e.length),e.endDate=t}})),length:Object(I.c)((function(e){return ge.a(e.startDate,e.endDate)})),dayInterval:Object(I.b)((function(e){var t=e.isAll?new Date:e.startDate;e.startDate=re.a(t),e.endDate=Ee.a(t)})),weekInterval:Object(I.b)((function(e){var t=e.isAll?new Date:e.startDate;e.startDate=be.a(t,{weekStartsOn:1}),e.endDate=pe.a(t,{weekStartsOn:1})})),monthInterval:Object(I.b)((function(e){var t=e.isAll?new Date:e.startDate;e.startDate=le.a(t),e.endDate=me.a(t)})),yearInterval:Object(I.b)((function(e){var t=e.isAll?new Date:e.startDate;e.startDate=he.a(t),e.endDate=de.a(t)})),allInterval:Object(I.b)((function(e){e.startDate=Ae,e.endDate=Te})),now:Object(I.b)((function(e){var t=new Date;e.isYear?(e.startDate=he.a(t),e.endDate=de.a(t)):e.isMonth?(e.startDate=le.a(t),e.endDate=me.a(t)):e.isWeek?(e.startDate=be.a(t,{weekStartsOn:1}),e.endDate=pe.a(t,{weekStartsOn:1})):e.isDay?(e.startDate=re.a(t),e.endDate=Ee.a(t)):(e.endDate=Ee.a(fe.a(t,e.length)),e.startDate=re.a(t))})),isAll:Object(I.c)((function(e){return ie(e.startDate,"==",Ae)&&ie(e.endDate,"==",Te)})),isYear:Object(I.c)((function(e){return ye.a(e.startDate,e.endDate)&&1===we.a(e.startDate)&&ke.a(e.endDate,Oe.a(e.endDate))})),isMonth:Object(I.c)((function(e){return xe.a(e.startDate,e.endDate)&&je.a(e.startDate)&&Ce.a(e.endDate)})),isWeek:Object(I.c)((function(e){return Se.a(e.startDate,e.endDate,{weekStartsOn:1})&&1===De.a(e.startDate)&&0===De.a(e.endDate)})),isDay:Object(I.c)((function(e){return ke.a(e.startDate,e.endDate)})),includesToday:Object(I.c)((function(e){var t=new Date;return ie(t,">=",e.startDate)&&ie(t,"<=",e.endDate)})),smartDisplayString:Object(I.c)((function(e){return e.isAll?"All":e.isYear?Ne.a(e.startDate,"yyyy"):e.isMonth?Ne.a(e.startDate,"MMMM, yyyy"):e.isDay?Ne.a(e.startDate,"d.M.yyyy"):e.displayString})),displayString:Object(I.c)((function(e){return(ye.a(e.startDate,e.endDate)?Ne.a(e.startDate,"d.M"):Ne.a(e.startDate,"d.M.yyyy"))+" - "+Ne.a(e.endDate,"d.M.yyyy")}))},filters:{searchTerm:"",minAmount:Number.NEGATIVE_INFINITY,maxAmount:Number.POSITIVE_INFINITY,excludedCategories:[],resetAll:Object(I.b)((function(e){e.searchTerm="",e.minAmount=Number.NEGATIVE_INFINITY,e.maxAmount=Number.POSITIVE_INFINITY,e.excludedCategories=[]})),setSearchTerm:Object(I.b)((function(e,t){e.searchTerm=t})),resetSearchTerm:Object(I.b)((function(e){e.searchTerm=""})),setAmount:Object(I.b)((function(e,t){var n=Object(m.a)(t,2),a=n[0],r=n[1];"number"===typeof a&&(e.minAmount=a),"number"===typeof r&&(e.maxAmount=r)})),resetAmount:Object(I.b)((function(e){e.minAmount=Number.NEGATIVE_INFINITY,e.maxAmount=Number.POSITIVE_INFINITY})),excludeCategory:Object(I.b)((function(e,t){var n;(n=e.excludedCategories).push.apply(n,Object(ne.a)(Array.isArray(t)?t:[t]))})),includeCategory:Object(I.b)((function(e,t){e.excludedCategories=e.excludedCategories.filter((function(e){return e!==t}))})),resetExcludedCategories:Object(I.b)((function(e){e.excludedCategories=[]}))},auth:$},Pe=Object(I.d)(Ie);var Fe=Object(I.e)(),Re=Fe.useStoreActions,_e=(Fe.useStoreDispatch,Fe.useStoreState);Fe.useStore;function We(){var e=Object(c.g)();return function(t){return e.push("string"===typeof t?t:t(Xt))}}var Me=T.b({email:T.c().defined().email(),password:T.c().defined()}).defined(),Le=function(){var e=Object(a.useState)(),t=Object(m.a)(e,2),n=t[0],o=t[1],i=We(),c=_e((function(e){return e.auth.user})),u=Re((function(e){return e.auth.loginWithGoogle})),f=Re((function(e){return e.auth.loginWithEmailPassword})),d=Re((function(e){return e.auth.requestConfirmationEmail}));function p(){return(p=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(void 0),e.next=3,f(t);case 3:(n=e.sent).onSuccess((function(){return i((function(e){return e.dashboard}))})),n.onFailure((function(e){switch(e.code){case"data/invalid-request-data":o("Invalid email or password.");break;case"auth/invalid-credentials":o("Wrong password or the user does not have a password.");break;case"auth/user-not-found":o("No user exists with that email.");break;case"auth/email-not-confirmed":o("Confirm your email before logging in. We have sent you a new email confirmation link."),(null===c||void 0===c?void 0:c.email)&&d({email:c.email});break;case"server/unavailable":o("Could not contact server. Try again later.");break;default:console.warn("Uncaught error code in login:",e),o("An error occured while logging in. Try again.")}}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i((function(e){return e.forgotPassword}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i((function(e){return e.register}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){c&&i((function(e){return e.dashboard}))}),[c,i]),r.a.createElement(A,{handleGoogleSubmit:function(){return v.apply(this,arguments)},handleSubmit:function(e){return p.apply(this,arguments)},handleForgotPassword:function(){return h.apply(this,arguments)},handleCreateAccount:function(){return b.apply(this,arguments)},error:n})},qe=(n(566),function(e){var t,n,o=Object(a.useState)(!1),i=Object(m.a)(o,2),c=i[0],u=i[1],s=Object(d.c)({resolver:Object(p.a)(Ue)}),l=s.formState.touched.email&&(null===(t=s.errors.email)||void 0===t?void 0:t.message),f=s.formState.touched.password&&(null===(n=s.errors.password)||void 0===n?void 0:n.message);return r.a.createElement("div",{className:"Register"},r.a.createElement(N,{header:"Create account",body:e.registered?r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{variant:"h6"},"Succesfully registered."),r.a.createElement(S,null,"Check your email in order to confirm your email address. ","You can login after having confirmation.")):r.a.createElement("form",{onSubmit:s.handleSubmit(e.handleSubmit)},r.a.createElement(v.a,{id:"register-email",name:"email",type:"text",inputRef:s.register,label:"Email",variant:"outlined",error:!!l,helperText:l,fullWidth:!0,InputProps:{endAdornment:r.a.createElement(h.a,{position:"end"},r.a.createElement(w.a,null))}}),r.a.createElement(v.a,{id:"register-password",name:"password",type:c?"text":"password",inputRef:s.register,label:"Password",variant:"outlined",error:!!f,helperText:f,fullWidth:!0,InputProps:{endAdornment:r.a.createElement(h.a,{position:"end"},r.a.createElement(b.a,{onClick:function(){return u((function(e){return!e}))},size:"small"},c?r.a.createElement(k.a,null):r.a.createElement(O.a,null)))}}),r.a.createElement(g.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0},"Create account"),e.error?r.a.createElement(S,{color:"error"},e.error):null),footer:r.a.createElement(g.a,{onClick:function(){return e.handleLogin()}},"Already have an account? Login")}))}),Ue=Object(T.b)({email:Object(T.c)().defined().max(255).email(),password:Object(T.c)().defined().min(6).max(255)}).defined(),Ye=function(){var e=Object(a.useState)(),t=Object(m.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(!1),c=Object(m.a)(i,2),u=c[0],f=c[1],d=We(),p=Re((function(e){return e.auth.registerWithEmailPassword}));function v(){return(v=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(void 0),console.log("Submit"),e.next=4,p({email:t.email,password:t.password});case 4:(n=e.sent).onSuccess((function(){return f(!0)})),n.onFailure((function(e){switch(e.code){case"data/invalid-request-data":o("Invalid email or password.");break;case"auth/user-already-exists":o("An user already exists with that email.");break;case"server/unavailable":o("Could not contact server. Try again later.");break;default:console.warn("Uncaught error code in login:",e),o("An error occured while logging in. Try again.")}}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d((function(e){return e.login}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(qe,{handleSubmit:function(e){return v.apply(this,arguments)},handleLogin:function(){return h.apply(this,arguments)},error:n,registered:u})};function Be(e){var t=e.fallbackRoute,n=Object(f.a)(e,["fallbackRoute"]),a=Xt.login,o=_e((function(e){return e.auth.initialized})),i=_e((function(e){return e.auth.isLoggedIn}));return o?i?r.a.createElement(c.b,n):r.a.createElement(c.a,{to:t||a}):null}n(567),n(568),n(569);var ze=n(645),Je=n(646);function Ve(e){var t=e.transaction.amount.isPositive?"positive":"negative";return r.a.createElement("div",{className:"TransactionListing"},r.a.createElement("div",{className:j()("icon",t)},r.a.createElement("div",{className:"iconContainer"},e.transaction.amount.isPositive?r.a.createElement(ze.a,null):r.a.createElement(Je.a,null))),r.a.createElement("div",{className:"category"},r.a.createElement("span",null,e.transaction.category)),r.a.createElement("div",{className:"comment"},r.a.createElement("span",null,e.transaction.comment)),r.a.createElement("div",{className:j()("amount",t)},r.a.createElement("span",null,e.transaction.amount.format())))}function Ge(e){var t=Re((function(e){return e.transactions.deleteTransaction})),n=Object(a.useCallback)((function(){t(e.transaction.id)}),[e.transaction,t]);return r.a.createElement(Ve,{transaction:e.transaction,handleDelete:n})}var He=n(228);function Ze(e){var t=Object(a.createRef)();return Object(a.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.recomputeRowHeights()}),[e,t]),r.a.createElement("div",{className:"TransactionList"},r.a.createElement(He.a,{className:"autoSizer"},(function(n){return r.a.createElement(He.b,{ref:t,className:"virtualizedList",height:n.height,width:n.width,rowCount:e.itemsByDates.length,rowHeight:function(t){var n=t.index;return 68*e.itemsByDates[n].items.length+48},noRowsRenderer:function(){return r.a.createElement(S,null,"No transactions")},rowRenderer:function(t){var n,a=e.itemsByDates[t.index];return r.a.createElement("div",{className:"dateGroup",key:t.key,style:t.style},r.a.createElement(S,null,(n=a.date).getFullYear()===$e?Object(Ne.a)(n,"dd.MM."):Object(Ne.a)(n,"dd.MM.yyyy")),r.a.createElement("ul",null,a.items.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(Ge,{transaction:e}))}))))}})})))}var $e=(new Date).getFullYear();function Ke(e){var t=_e((function(e){return e.transactions.itemsByDates})),n=_e((function(e){return e.transactions.filtered.itemsByDates}));return r.a.createElement(Ze,{itemsByDates:e.bypassFilters?t:n})}n(579);var Qe=n(410),Xe=n.n(Qe);function et(e){return r.a.createElement("header",{className:"PageHeader"},r.a.createElement("img",{src:Xe.a,alt:"",className:"texture"}),e.children)}n(580);function tt(e){var t=e.amount,n=Object(f.a)(e,["amount"]);return r.a.createElement("span",{className:"MoneyType"},r.a.createElement(S,Object.assign({condensed:!0},n,{component:"span"}),t.format()))}n(581);var nt=n(649),at=n(650),rt=n(651),ot=n(647),it=n(657),ct=n(397);function ut(e){var t=Object(a.useMemo)((function(){return window.matchMedia(e)}),[e]),n=Object(a.useState)(!1),r=Object(m.a)(n,2),o=r[0],i=r[1],c=Object(a.useCallback)((function(){i(t.matches)}),[t]);return Object(a.useEffect)((function(){return c(),t.addEventListener("change",c),function(){t.removeEventListener("change",c)}}),[t,c]),o}n(582);var st=n(648),lt=n(672),mt=n(673);function ft(e){return r.a.createElement("div",{className:"FiltersForm"},r.a.createElement("header",null,r.a.createElement("div",{className:"title"},r.a.createElement(S,{variant:"button"},"Filters"),r.a.createElement(ot.a,null)),r.a.createElement(g.a,{variant:"text",onClick:e.onResetAll},"Reset all")),r.a.createElement("section",{className:"searchTerm"},r.a.createElement("div",{className:"sectionLabel"},r.a.createElement(S,{className:"label"},"Search term")),r.a.createElement(v.a,{value:e.searchTerm,onChange:function(t){return e.setSearchTerm(t.target.value)},variant:"outlined",size:"small",fullWidth:!0,InputProps:{endAdornment:r.a.createElement(h.a,{position:"end"},r.a.createElement(b.a,{size:"small",onClick:e.onResetSearchTerm},r.a.createElement(st.a,null)))}})),r.a.createElement("section",{className:"amount"},r.a.createElement("div",{className:"sectionLabel"},r.a.createElement(S,{className:"label"},"Amount"),r.a.createElement(g.a,{variant:"text",onClick:e.onResetAmount},"Reset")),r.a.createElement("div",{className:"sliderLabel"},r.a.createElement(S,null,e.minAmount<=e.minPossibleAmount?"N/A":Math.floor(e.minAmount/100)+" \u20ac"),r.a.createElement(S,null,e.maxAmount>=e.maxPossibleAmount?"N/A":Math.ceil(e.maxAmount/100)+" \u20ac")),r.a.createElement("div",{className:"sliderContainer"},r.a.createElement(lt.a,{value:[Math.floor(e.minAmount/100),Math.ceil(e.maxAmount/100)],onChange:function(t,n){return Array.isArray(n)&&2===n.length?e.setAmount(n.map((function(e){return 100*e}))):console.error("Slider returned value which is not a numeric tuple:",n)},step:1,min:Math.floor(e.minPossibleAmount/100),max:Math.ceil(e.maxPossibleAmount/100),marks:[{value:0,label:"0"}],valueLabelDisplay:"off"}))),r.a.createElement("section",{className:"category"},r.a.createElement("div",{className:"sectionLabel"},r.a.createElement(S,{className:"label"},"Categories"),r.a.createElement(g.a,{variant:"text",onClick:e.onResetExcludedCategories},"Reset")),r.a.createElement("div",{className:"categoryChips"},e.categories.map((function(t){var n=e.excludedCategories.includes(t);return r.a.createElement(mt.a,{onClick:function(){n?e.includeCategory(t):e.excludeCategory(t)},color:n?"default":"primary",label:t})}))),r.a.createElement("div",{className:"categoryActions"},r.a.createElement(g.a,{variant:"text",onClick:e.onResetExcludedCategories},"Select all"),r.a.createElement(g.a,{variant:"text",onClick:function(){return e.excludeCategory(e.categories)}},"Deselect all"))),void 0===e.onConfirm?null:r.a.createElement("section",{className:"ok"},r.a.createElement(g.a,{color:"primary",variant:"contained",onClick:e.onConfirm,fullWidth:!0},"Ok")))}function dt(e){var t=Re((function(e){return e.filters.resetAll})),n=Re((function(e){return e.filters.resetSearchTerm})),a=Re((function(e){return e.filters.resetAmount})),o=Re((function(e){return e.filters.resetExcludedCategories})),i=_e((function(e){return e.transactions.categories})),c=_e((function(e){return e.filters.searchTerm})),u=_e((function(e){return e.filters.minAmount})),s=_e((function(e){return e.filters.maxAmount})),l=_e((function(e){return e.filters.excludedCategories})),m=Re((function(e){return e.filters.setSearchTerm})),f=Re((function(e){return e.filters.setAmount})),d=Re((function(e){return e.filters.excludeCategory})),p=Re((function(e){return e.filters.includeCategory})),v=_e((function(e){return e.transactions.minimumAmount})).value,h=_e((function(e){return e.transactions.maximumAmount})).value;return r.a.createElement(ft,{onConfirm:e.onConfirm,onResetAll:function(){t(),e.onConfirm&&e.onConfirm()},onResetSearchTerm:function(){return n()},onResetAmount:function(){return a()},onResetExcludedCategories:function(){return o()},categories:i,searchTerm:c,minAmount:u,maxAmount:s,excludedCategories:l,setSearchTerm:function(e){return m(e)},setAmount:function(e){return f(e)},excludeCategory:function(e){return d(e)},includeCategory:function(e){return p(e)},minPossibleAmount:v,maxPossibleAmount:h})}n(583);var pt=n(667);function vt(e){return r.a.createElement("div",{className:"IntervalPickerForm"},r.a.createElement("section",{className:"title"},r.a.createElement("div",{className:"currentInterval"},r.a.createElement(nt.a,null),r.a.createElement(S,null,e.intervalString)),r.a.createElement("div",{className:"nextOrPreviousInterval"},r.a.createElement(b.a,{disabled:e.isAll,onClick:e.onPrevious},r.a.createElement(at.a,null)),r.a.createElement(g.a,{variant:"text",color:e.includesToday?"primary":"default",onClick:e.onNow},"Now"),r.a.createElement(b.a,{disabled:e.isAll,onClick:e.onNext},r.a.createElement(rt.a,null)))),r.a.createElement(D.a,null),r.a.createElement("section",{className:"intervalLength"},r.a.createElement(g.a,{variant:"text",color:e.isDay?"primary":"default",onClick:e.onDay},"Day"),r.a.createElement(g.a,{variant:"text",color:e.isWeek?"primary":"default",onClick:e.onWeek},"Week"),r.a.createElement(g.a,{variant:"text",color:e.isMonth?"primary":"default",onClick:e.onMonth},"Month"),r.a.createElement(g.a,{variant:"text",color:e.isYear?"primary":"default",onClick:e.onYear},"Year"),r.a.createElement(g.a,{variant:"text",color:e.isAll?"primary":"default",onClick:e.onAll},"All")),r.a.createElement("section",{className:"dateSection"},r.a.createElement(pt.a,{value:ie(e.startDate,"==",Ae)?null:e.startDate,onChange:function(t){return e.setStartDate(t)},format:"dd/MM/yyyy",inputVariant:"outlined",variant:"inline",size:"small",label:"From",fullWidth:!0})),r.a.createElement("section",{className:"dateSection"},r.a.createElement(pt.a,{value:ie(e.endDate,"==",Te)?null:e.endDate,onChange:function(t){return e.setEndDate(t)},format:"dd/MM/yyyy",inputVariant:"outlined",variant:"inline",size:"small",label:"To",fullWidth:!0})),e.onConfirm&&r.a.createElement(g.a,{color:"primary",variant:"contained",fullWidth:!0,onClick:e.onConfirm},"Ok"))}function ht(e){var t=_e((function(e){return e.interval.smartDisplayString})),n=_e((function(e){return e.interval.isDay})),a=_e((function(e){return e.interval.isWeek})),o=_e((function(e){return e.interval.isMonth})),i=_e((function(e){return e.interval.isYear})),c=_e((function(e){return e.interval.isAll})),u=Re((function(e){return e.interval.dayInterval})),s=Re((function(e){return e.interval.weekInterval})),l=Re((function(e){return e.interval.monthInterval})),m=Re((function(e){return e.interval.yearInterval})),f=Re((function(e){return e.interval.allInterval})),d=Re((function(e){return e.interval.previousInterval})),p=Re((function(e){return e.interval.nextInterval})),v=Re((function(e){return e.interval.now})),h=_e((function(e){return e.interval.includesToday})),b=_e((function(e){return e.interval.startDate})),g=_e((function(e){return e.interval.endDate})),E=Re((function(e){return e.interval.setStartDate})),y=Re((function(e){return e.interval.setEndDate}));return r.a.createElement(vt,{onConfirm:e.onConfirm,intervalString:t,isDay:n,isWeek:a,isMonth:o,isYear:i,isAll:c,onDay:function(){return u()},onWeek:function(){return s()},onMonth:function(){return l()},onYear:function(){return m()},onAll:function(){return f()},onPrevious:function(){return d()},onNext:function(){return p()},onNow:function(){return v()},includesToday:h,startDate:b,endDate:g,setStartDate:E,setEndDate:y})}function bt(e){var t=Object(a.useState)(!1),n=Object(m.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)(),u=Object(m.a)(c,2),s=u[0],l=u[1],f=ut("(min-width: 900px)"),d=ut("(min-width: 1200px)");return r.a.createElement(r.a.Fragment,null,r.a.createElement(it.a,{open:o,onClose:function(){return i(!1)},anchor:d?"right":"bottom"},r.a.createElement("div",{className:"FiltersPanel_filtersFormDrawer"},r.a.createElement(dt,{onConfirm:function(){return i(!1)}}))),f?r.a.createElement(ct.a,{open:!!s,onClose:function(){return l(void 0)},anchorEl:s},r.a.createElement("div",{className:"FiltersPanel_intervalPickerMenu"},r.a.createElement(ht,{onConfirm:function(){return l(void 0)}}))):r.a.createElement(it.a,{open:!!s,onClose:function(){return l(void 0)},anchor:"bottom"},r.a.createElement("div",{className:"FiltersPanel_intervalPickerDrawer"},r.a.createElement(ht,{onConfirm:function(){return l(void 0)}}))),r.a.createElement("div",{className:"FiltersPanel"},r.a.createElement("div",{className:"floatLeft"},r.a.createElement(g.a,{variant:"text",startIcon:r.a.createElement(nt.a,null),onClick:function(e){return l(e.currentTarget)}},e.intervalString)),r.a.createElement("div",{className:"floatRight"},d&&r.a.createElement("div",{className:"intervalLength"},r.a.createElement(b.a,{disabled:e.isAll,onClick:e.onPrevious},r.a.createElement(at.a,null)),r.a.createElement(g.a,{variant:"text",color:e.includesToday?"primary":"default",onClick:e.onNow},"Now"),r.a.createElement(b.a,{disabled:e.isAll,onClick:e.onNext},r.a.createElement(rt.a,null)),r.a.createElement(g.a,{variant:"text",color:e.isDay?"primary":"default",onClick:e.onDay},"Day"),r.a.createElement(g.a,{variant:"text",color:e.isWeek?"primary":"default",onClick:e.onWeek},"Week"),r.a.createElement(g.a,{variant:"text",color:e.isMonth?"primary":"default",onClick:e.onMonth},"Month"),r.a.createElement(g.a,{variant:"text",color:e.isYear?"primary":"default",onClick:e.onYear},"Year"),r.a.createElement(g.a,{variant:"text",color:e.isAll?"primary":"default",onClick:e.onAll},"All")),r.a.createElement("div",{className:"filtersButton"},r.a.createElement(g.a,{variant:d?"outlined":"text",endIcon:r.a.createElement(ot.a,null),onClick:function(){return i(!0)}},"Filters")))))}function gt(e){var t=_e((function(e){return e.interval.smartDisplayString})),n=_e((function(e){return e.interval.isDay})),a=_e((function(e){return e.interval.isWeek})),o=_e((function(e){return e.interval.isMonth})),i=_e((function(e){return e.interval.isYear})),c=_e((function(e){return e.interval.isAll})),u=Re((function(e){return e.interval.dayInterval})),s=Re((function(e){return e.interval.weekInterval})),l=Re((function(e){return e.interval.monthInterval})),m=Re((function(e){return e.interval.yearInterval})),f=Re((function(e){return e.interval.allInterval})),d=Re((function(e){return e.interval.previousInterval})),p=Re((function(e){return e.interval.nextInterval})),v=Re((function(e){return e.interval.now})),h=_e((function(e){return e.interval.includesToday}));return r.a.createElement(bt,{intervalString:t,isDay:n,isWeek:a,isMonth:o,isYear:i,isAll:c,onDay:function(){return u()},onWeek:function(){return s()},onMonth:function(){return l()},onYear:function(){return m()},onAll:function(){return f()},onPrevious:function(){return d()},onNext:function(){return p()},onNow:function(){return v()},includesToday:h})}function Et(e){return r.a.createElement("div",{className:"Dashboard"},r.a.createElement(et,null,r.a.createElement("div",{className:"totals"},r.a.createElement(tt,{amount:e.filteredSum,variant:"h4"}))),r.a.createElement("section",{className:"filtersPanel"},r.a.createElement(gt,null)),r.a.createElement("section",{className:"transactionsList"},r.a.createElement(Ke,null)))}function yt(){var e=_e((function(e){return e.auth.user})),t=_e((function(e){return e.interval.smartDisplayString})),n=_e((function(e){return e.transactions.filtered.sums}));return e?r.a.createElement(Et,{intervalString:t,filteredSum:n.all,filteredIncomesSum:n.incomes,filteredExpensesSum:n.expenses,user:e}):null}n(584);var wt=n(411),kt=n.n(wt);function Ot(e){return xt.apply(this,arguments)}function xt(){return(xt=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=t.files?t.files[0]:void 0;if(n){var a=new FileReader;a.onerror=function(t){e(new J(t,{code:"read-file-as-text/file-reader-error",message:"File reader error",status:10}))},a.onabort=function(){e(new J(null,{code:"read-file-as-text/aborted",message:"File read aborted",status:10}))},a.onload=function(t){var n;"string"===typeof(null===(n=t.target)||void 0===n?void 0:n.result)?e(new z(t.target.result)):t.target?e(new J(t.target.result,{code:"read-file-as-text/invalid-type",message:"Reader target result of invalid type",status:10})):e(new J(t.target,{code:"read-file-as-text/no-reader-event-target",message:"Reader did not provide a target",status:10}))},a.readAsText(n)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(){return(jt=Object(l.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ot(t);case 3:if(!(n=e.sent).isFailure()){e.next=6;break}return e.abrupt("return",new J(n.value,n.details));case 6:return a=kt.a.read(n),console.log(a),e.abrupt("return",J.Unimplemented());case 11:if(e.prev=11,e.t0=e.catch(0),!(e.t0 instanceof Error)){e.next=17;break}return e.abrupt("return",J.Error(e.t0));case 17:return e.abrupt("return",J.Unknown());case 18:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function Ct(e){return r.a.createElement("div",{className:"Settings"},e.user.photoUrl?r.a.createElement("img",{style:{width:64,height:64},alt:"profile",src:e.user.photoUrl}):null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Display name"),r.a.createElement("td",null,e.user.displayName)),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,e.user.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"ID"),r.a.createElement("td",null,e.user.id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Google ID"),r.a.createElement("td",null,e.user.googleId)))),r.a.createElement("div",null,r.a.createElement("button",{onClick:e.handleLogout},"Log out")),r.a.createElement("div",null,r.a.createElement("label",null,"Import data from Excel"),r.a.createElement("input",{type:"file",onChange:function(e){(function(e){return jt.apply(this,arguments)})(e.target).then((function(e){e.onSuccess((function(e){console.log("Success:",e)})).onFailure((function(e){console.log("Failure:",e)}))}))}})),r.a.createElement("div",null,r.a.createElement("button",null,"Export data")))}function St(e){var t=_e((function(e){return e.auth.user})),n=Re((function(e){return e.auth.logout})),a=We();function o(){return(o=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:e.sent.onSuccess((function(){a((function(e){return e.login}))}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t?r.a.createElement(Ct,{user:t,handleLogout:function(){return o.apply(this,arguments)}}):null}var Dt=n(162);n(588);function Nt(e){var t=Re((function(e){return e.transactions.postTransaction}));return r.a.createElement("div",{className:"Analytics"},r.a.createElement("input",{type:"file",accept:".csv",onChange:function(e){if(console.log("Handling change"),!e.target.files)throw new Error("No files array");var n=e.target.files[0];if(!n)throw new Error("No file");var a=new FileReader;a.addEventListener("load",(function(e){if(!e.target)throw new Error("No load event target");if(!e.target.result)throw new Error("Load event target result is null");var n,a=e.target.result.toString().split("\n"),r=Object(Dt.a)(a);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o){var i=o.split(";");t({category:i[1],comment:i[3],integerAmount:Number(i[2].replace(/[^\d-]/g,"")),time:new Date(i[0].split(".").reverse().map((function(e){return e.padStart(2,"0")})).join("-")).getTime()})}}}catch(c){r.e(c)}finally{r.f()}})),a.readAsText(n)}}))}function At(e){return r.a.createElement(Nt,null)}n(589);function Tt(e){var t,n=Object(d.c)({resolver:Object(p.a)(It)}),a=n.register,o=n.handleSubmit,i=n.errors,c=n.formState,u=(Object(f.a)(n,["register","handleSubmit","errors","formState"]),c.touched.email&&(null===(t=i.email)||void 0===t?void 0:t.message));return r.a.createElement("div",{className:"ForgotPassword"},r.a.createElement(N,{header:"Forgot password",body:e.success?r.a.createElement(S,null,"Recovery email sent. Check your email."):r.a.createElement("form",{noValidate:!0,onSubmit:o(e.handleSubmit)},r.a.createElement(S,null,"Enter your email below and we will send you an email containing a link, which you can use to change your password."),r.a.createElement(v.a,{id:"login-email",name:"email",type:"text",inputRef:a,label:"Email",variant:"outlined",error:!!u,helperText:u,fullWidth:!0,InputProps:{endAdornment:r.a.createElement(h.a,{position:"end"},r.a.createElement(w.a,null))}}),r.a.createElement(g.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0},"Send recovery email"),e.error?r.a.createElement(S,{color:"error"},e.error):null),footer:r.a.createElement(g.a,{onClick:function(){return e.handleLogin()}},"Back")}))}var It=T.b({email:T.c().defined().min(3).max(255).email()}).defined();function Pt(e){var t=Object(a.useState)(),n=Object(m.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)(!1),u=Object(m.a)(c,2),f=u[0],d=u[1],p=We(),v=Re((function(e){return e.auth.forgotPassword})),h=Re((function(e){return e.auth.loginWithGoogle}));function b(){return(b=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(void 0),e.next=3,v(t);case 3:(n=e.sent).onSuccess((function(){return d(!0)})),n.onFailure((function(e){switch(e.code){case"data/invalid-request-data":i("Invalid email or password.");break;case"auth/invalid-credentials":i("Wrong password or the user does not have a password.");break;case"auth/user-not-found":i("No user exists with that email.");break;case"server/unavailable":i("Could not contact server. Try again later.");break;default:console.warn("Uncaught error code in login:",e),i("An error occured while logging in. Try again.")}}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p((function(e){return e.login}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p((function(e){return e.register}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(Tt,{handleSubmit:function(e){return b.apply(this,arguments)},handleCreateAccount:function(){return E.apply(this,arguments)},handleGoogleSubmit:function(){return y.apply(this,arguments)},handleLogin:function(){return g.apply(this,arguments)},success:f,error:o})}n(590),n(591);var Ft=n(660),Rt=n(661),_t=n(662),Wt=n(663),Mt=n(664),Lt=n(665),qt=(n(592),n(670));function Ut(e){return r.a.createElement("form",{className:"TransactionForm",onSubmit:function(t){t.preventDefault(),e.onSubmit()}},r.a.createElement(S,{variant:"button"},"New transaction"),r.a.createElement(v.a,{value:e.amount,onChange:function(t){return e.onAmountChange(t.target.value)},id:"transaction-amount",variant:"outlined",name:"amount",type:"numeric",label:"Amount",error:!!e.errors.amount,helperText:e.errors.amount,fullWidth:!0,required:!0,size:"small",InputProps:{endAdornment:r.a.createElement(h.a,{position:"end"},r.a.createElement(S,null,"EUR"))}}),r.a.createElement(qt.a,{value:e.category,onChange:function(t,n){return e.onCategoryChange(n)},id:"transaction-category",freeSolo:!0,openOnFocus:!0,autoHighlight:!0,selectOnFocus:!0,disableClearable:!0,fullWidth:!0,size:"small",options:e.categories,renderInput:function(t){return r.a.createElement(v.a,Object.assign({variant:"outlined",name:"category",type:"text",label:"Category",error:!!e.errors.category,helperText:e.errors.category,required:!0},t))}}),r.a.createElement(pt.b,{value:e.time,onChange:function(t){return e.onTimeChange(t)},format:"dd/MM/yyyy",id:"transaction-time",variant:"inline",inputVariant:"outlined",label:"Date",error:!!e.errors.time,helperText:e.errors.time,fullWidth:!0,required:!0,size:"small"}),r.a.createElement(v.a,{value:e.comment,onChange:function(t){return e.onCommentChange(t.target.value)},id:"transaction-comment",variant:"outlined",name:"comment",type:"text",label:"Comment",error:!!e.errors.comment,helperText:e.errors.comment,fullWidth:!0,size:"small"}),r.a.createElement(g.a,{type:"submit",color:"primary",variant:"contained",size:"small"},"Create"))}function Yt(e){var t=_e((function(e){return e.transactions.categories})),n=Re((function(e){return e.transactions.postTransaction})),o=Object(a.useState)(""),i=Object(m.a)(o,2),c=i[0],u=i[1],f=Object(a.useState)(""),d=Object(m.a)(f,2),p=d[0],v=d[1],h=Object(a.useState)(new Date),b=Object(m.a)(h,2),g=b[0],E=b[1],y=Object(a.useState)(""),w=Object(m.a)(y,2),k=w[0],O=w[1],x=Object(a.useState)(),j=Object(m.a)(x,2),C=j[0],S=j[1],D=Object(a.useState)(),N=Object(m.a)(D,2),A=N[0],T=N[1],I=Object(a.useState)(),P=Object(m.a)(I,2),F=P[0],R=P[1],_=Object(a.useState)(),W=Object(m.a)(_,2),M=W[0],L=W[1],q=Object(a.useState)(),U=Object(m.a)(q,2),Y=U[0],B=U[1];function z(){var e=function(){if(!/^-?\d*[\.,]?\d{0,2}$/.test(c.trim()))return"Invalid number"}(),t=function(){var e=/[A-Za-z\d\-_\s]+/.test(p.trim()),t=""===p.trim();return e?t?"Please enter a cetegory":void 0:"Invalid category, do not use any special characters"}(),n=function(){if(!(g.getTime()>0&&!isNaN(g.getTime())))return"Invalid date"}();return T(e),R(t),L(n),B(void 0),!(e||t||n)}function J(){return(J=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!z()){e.next=7;break}return e.next=4,n({integerAmount:Math.trunc(100*Number(c.trim().replace(/,/g,"."))),category:p.trim(),time:g.getTime(),comment:k.trim()});case 4:(t=e.sent).onSuccess((function(){u(""),v(""),E(new Date),O("")})),t.onFailure((function(e){var t,n,a,r,o,i,c,u,s,l,m,f,d,p;switch(e.code){case"data/invalid-request-data":(null===(t=e.data)||void 0===t||null===(n=t.errors)||void 0===n?void 0:n.integerAmount)&&T(String(e.data.errors.integerAmount)),(null===(a=e.data)||void 0===a||null===(r=a.errors)||void 0===r?void 0:r.category)&&R(String(e.data.errors.category)),(null===(o=e.data)||void 0===o||null===(i=o.errors)||void 0===i?void 0:i.comment)&&B(String(e.data.errors.comment)),(null===(c=e.data)||void 0===c||null===(u=c.errors)||void 0===u?void 0:u.time)&&L(String(e.data.errors.time)),(null===(s=e.data)||void 0===s||null===(l=s.errors)||void 0===l?void 0:l._root)&&S(e.data.errors._root),(null===(m=e.data)||void 0===m||null===(f=m.errors)||void 0===f?void 0:f.id)&&S(e.data.errors.id),(null===(d=e.data)||void 0===d||null===(p=d.errors)||void 0===p?void 0:p.uid)&&S(e.data.errors.uid);break;case"transaction/already-exists":S("Could not post transaction due to overlapping IDs");break;case"server/unavailable":S("Could not react server. Try again later.");break;default:console.warn("Uncaught failure",e),S("Error posting transaction.")}}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(Ut,{onSubmit:function(){return J.apply(this,arguments)},amount:c,category:p,time:g,comment:k,onAmountChange:function(e){return u(e)},onCategoryChange:function(e){return v(e)},onTimeChange:function(e){return E(e)},onCommentChange:function(e){return O(e)},errors:{main:C,amount:A,category:F,time:M,comment:Y},categories:t})}function Bt(e){var t=ut("(min-width: 600px)");return r.a.createElement(r.a.Fragment,null,r.a.createElement(it.a,{open:e.transactionFormOpen,onClose:e.onTransactionFormClose,anchor:t?"left":"bottom"},r.a.createElement(Yt,null)),r.a.createElement("div",{className:"Sidebar"},t?r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"top-row"},r.a.createElement(S,{variant:"h4",component:"h6"},"Expence"),r.a.createElement(b.a,{onClick:e.logout},r.a.createElement(Ft.a,null))),r.a.createElement("div",{className:"bottom-row"},r.a.createElement(Rt.a,null),r.a.createElement(S,null,e.user.displayName))),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"tabContainer"},r.a.createElement(g.a,{variant:"text",className:j()("tab",{active:e.isDashboard}),onClick:e.onDashboard,startIcon:r.a.createElement(_t.a,null)},"Dashboard")),r.a.createElement("div",{className:"tabContainer"},r.a.createElement(g.a,{variant:"text",className:j()("tab",{active:e.isAnalytics}),onClick:e.onAnalytics,startIcon:r.a.createElement(Wt.a,null)},"Analytics")),r.a.createElement("div",{className:"tabContainer"},r.a.createElement(g.a,{variant:"text",className:j()("tab",{active:e.isBudget}),onClick:e.onBudget,startIcon:r.a.createElement(Mt.a,null)},"Budget")),r.a.createElement("div",{className:"tabContainer"},r.a.createElement(g.a,{variant:"text",className:j()("tab",{active:e.isSettings}),onClick:e.onSettings,startIcon:r.a.createElement(Lt.a,null)},"Settings")),r.a.createElement("div",{className:"tabContainer addButton"},r.a.createElement(g.a,{variant:"text",className:j()("tab"),onClick:e.onTransactionFormOpen,startIcon:r.a.createElement(ze.a,null)},"New transaction")))):r.a.createElement("div",{className:"tabs"},r.a.createElement("div",{className:"tabContainer"},r.a.createElement(b.a,{className:j()("tab",{active:e.isDashboard}),onClick:e.onDashboard},r.a.createElement(_t.a,null))),r.a.createElement("div",{className:"tabContainer"},r.a.createElement(b.a,{className:j()("tab",{active:e.isAnalytics}),onClick:e.onAnalytics},r.a.createElement(Wt.a,null))),r.a.createElement("div",{className:"tabContainer"},r.a.createElement(b.a,{className:j()("tab"),onClick:e.onTransactionFormOpen},r.a.createElement(ze.a,null))),r.a.createElement("div",{className:"tabContainer"},r.a.createElement(b.a,{className:j()("tab",{active:e.isBudget}),onClick:e.onBudget},r.a.createElement(Mt.a,null))),r.a.createElement("div",{className:"tabContainer"},r.a.createElement(b.a,{className:j()("tab",{active:e.isSettings}),onClick:e.onSettings},r.a.createElement(Lt.a,null))))))}function zt(e){var t=Object(c.i)(Xt.dashboard),n=Object(c.i)(Xt.analytics),o=Object(c.i)(Xt.budget),i=Object(c.i)(Xt.settings),u=_e((function(e){return e.auth.user})),s=Re((function(e){return e.auth.logout})),l=We(),f=Object(a.useState)(!1),d=Object(m.a)(f,2),p=d[0],v=d[1];return u?r.a.createElement(Bt,{isDashboard:!!t,onDashboard:function(){return l(Xt.dashboard)},isAnalytics:!!n,onAnalytics:function(){return l(Xt.analytics)},isBudget:!!o,onBudget:function(){return l(Xt.budget)},isSettings:!!i,onSettings:function(){return l(Xt.settings)},user:u,logout:function(){return s()},transactionFormOpen:p,onTransactionFormOpen:function(){return v(!0)},onTransactionFormClose:function(){return v(!1)}}):null}function Jt(e){return r.a.createElement("div",{className:"AppFrame"},r.a.createElement("div",{className:"sidebar"},r.a.createElement(zt,null)),r.a.createElement("div",{className:"content"},e.children))}function Vt(e){return r.a.createElement(Jt,{children:e.children})}n(593);var Gt=n(655);function Ht(e){var t,n=Object(a.useState)(!1),o=Object(m.a)(n,2),i=o[0],c=o[1],u=Object(d.c)({resolver:Object(p.a)(Zt)}),s=u.formState.touched.password&&(null===(t=u.errors.password)||void 0===t?void 0:t.message);return r.a.createElement("div",{className:"ChangePassword"},r.a.createElement(N,{header:"Change password",body:e.loading?r.a.createElement(Gt.a,null):e.validTokenEmail?e.passwordChangeSuccessful?r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null,"Password changed for "+e.validTokenEmail),r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:e.onLogin,fullWidth:!0},"Login")):r.a.createElement("form",{onSubmit:u.handleSubmit(e.onSubmit)},r.a.createElement(S,null,"Enter a new password for "+e.validTokenEmail),r.a.createElement(v.a,{id:"change-password",name:"password",type:i?"text":"password",inputRef:u.register,label:"Password",variant:"outlined",error:!!s,helperText:s,fullWidth:!0,InputProps:{endAdornment:r.a.createElement(h.a,{position:"end"},r.a.createElement(b.a,{onClick:function(){return c((function(e){return!e}))},size:"small"},i?r.a.createElement(k.a,null):r.a.createElement(O.a,null)))}}),r.a.createElement(g.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0},"Change password"),e.error?r.a.createElement(S,{color:"error"},e.error):null):r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{color:"error"},"Invalid password change link"),r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:e.onLogin,fullWidth:!0},"Back to login"))}))}var Zt=T.b({password:T.c().defined().min(6).max(255)}).defined();function $t(e){var t=Object(c.h)().token,n=We(),o=Re((function(e){return e.auth.validateChangePasswordToken})),i=Re((function(e){return e.auth.changePassword})),u=Object(a.useState)(),s=Object(m.a)(u,2),l=s[0],f=s[1],d=Object(a.useState)(!1),p=Object(m.a)(d,2),v=p[0],h=p[1],b=Object(a.useState)(),g=Object(m.a)(b,2),E=g[0],y=g[1];if(Object(a.useEffect)((function(){t&&o({token:t}).then((function(e){e.onSuccess((function(e){f(e)})),e.onFailure((function(){f(null)}))}))}),[]),!t)return n((function(e){return e.login})),null;return r.a.createElement(Ht,{validTokenEmail:l,loading:void 0===l,passwordChangeSuccessful:v,onSubmit:function(e){t&&i(Object(M.a)(Object(M.a)({},e),{},{token:t})).then((function(e){e.onSuccess((function(){h(!0)})),e.onFailure((function(){y("Could not change password")}))}))},onLogin:function(){return n((function(e){return e.login}))},error:E})}n(594);function Kt(e){return r.a.createElement("div",{className:"ConfirmEmail"},r.a.createElement(N,{header:"Change password",body:function(){switch(e.success){case void 0:return r.a.createElement(Gt.a,null);case!1:return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{color:"error"},"Invalid password change link"),r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:e.onLogin,fullWidth:!0},"Back to login"));case!0:return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null,"Email succesfully confirmed"),r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:e.onLogin,fullWidth:!0},"Login"))}}()}))}function Qt(e){var t=Object(c.h)().token,n=We(),o=Re((function(e){return e.auth.confirmEmail})),i=Object(a.useState)(),u=Object(m.a)(i,2),s=u[0],l=u[1];return Object(a.useEffect)((function(){t&&o({token:t}).then((function(e){l(e.isSuccess())}))}),[]),t?r.a.createElement(Kt,{success:s,onLogin:function(){return n((function(e){return e.login}))}}):(n((function(e){return e.login})),null)}var Xt={approot:"/app",dashboard:"/app/dashboard",analytics:"/app/analytics",budget:"/app/budget",settings:"/app/settings",login:"/",forgotPassword:"/forgotPassword",register:"/register",changePassword:function(e){return"/changePassword/".concat(e)},confirmEmail:function(e){return"/confirmEmail/".concat(e)}};function en(){return r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:Xt.login},r.a.createElement(Le,null)),r.a.createElement(c.b,{exact:!0,path:Xt.register},r.a.createElement(Ye,null)),r.a.createElement(c.b,{exact:!0,path:Xt.forgotPassword},r.a.createElement(Pt,null)),r.a.createElement(c.b,{exact:!0,path:Xt.changePassword(":token")},r.a.createElement($t,null)),r.a.createElement(c.b,{exact:!0,path:Xt.confirmEmail(":token")},r.a.createElement(Qt,null)),r.a.createElement(Be,{exact:!0,path:Xt.dashboard},r.a.createElement(Vt,null,r.a.createElement(yt,null))),r.a.createElement(Be,{exact:!0,path:Xt.analytics},r.a.createElement(Vt,null,r.a.createElement(At,null))),r.a.createElement(Be,{exact:!0,path:Xt.budget},r.a.createElement(Vt,null,r.a.createElement("p",null,"Budget placeholder"))),r.a.createElement(Be,{exact:!0,path:Xt.settings},r.a.createElement(Vt,null,r.a.createElement(St,null))),r.a.createElement(c.b,{exact:!0,path:"/v"},"Version number 0.0.1"),r.a.createElement(c.b,{path:"/"},r.a.createElement(c.a,{to:Xt.dashboard})))}var tn=function(){var e=Re((function(e){return e.auth.getProfile}));return Object(a.useEffect)((function(){e()}),[e]),r.a.createElement(en,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var nn=n(83),an=n(666),rn=n(46),on=n(414),cn=n(48);function un(e,t){var n=getComputedStyle(document.documentElement).getPropertyValue("--"+e);return t&&t.color,n}var sn=Object(on.a)({palette:{primary:Object(M.a)(Object(M.a)({},cn.a.deepPurple),{},{main:un("color-primary-main",{color:!0}),dark:un("color-primary-dark",{color:!0}),light:un("color-primary-light",{color:!0}),50:un("color-primary-50",{color:!0}),100:un("color-primary-100",{color:!0}),200:un("color-primary-200",{color:!0}),300:un("color-primary-300",{color:!0}),400:un("color-primary-400",{color:!0}),500:un("color-primary-500",{color:!0}),600:un("color-primary-600",{color:!0}),700:un("color-primary-900",{color:!0}),800:un("color-primary-800",{color:!0}),900:un("color-primary-700",{color:!0}),contrastText:"#fff"})}});var ln=n(413);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I.a,{store:Pe},r.a.createElement(an.a,{theme:sn},r.a.createElement(rn.a,{utils:ln.a},r.a.createElement(nn.a,null,r.a.createElement(tn,null)))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[423,1,2]]]);
//# sourceMappingURL=main.d6d3e053.chunk.js.map