generator client {
  provider = "prisma-client-js"
}

datasource postgresql {
  provider = "postgresql"
  url = "***"
}

model Transaction {
  id            String   @id @default(uuid())
  uid           String
  categoryId    String   @map("category_id")
  integerAmount Int      @map("integer_amount")
  time          DateTime
  comment       String?
  user          User     @relation(fields: [uid], references: [id])
  category      Category @relation(fields: [categoryId], references: [id])

  @@map(name: "transactions")
}

model User {
  id                 String  @id @default(uuid())
  email              String? @unique
  emailVerified      Boolean @default(false) @map("email_verified")
  displayName        String? @map("display_name")
  password           String?
  googleId           String? @unique @map("google_id")
  photoUrl           String? @map("photo_url")
  tokenVersion       Int     @default(1) @map("token_version")
  disabled           Boolean @default(false)
  isAdmin            Boolean @default(false)
  prefersColorScheme String? @map("prefers_color_scheme")

  transactions Transaction[]
  categories   Category[]
  @@map(name: "users")
}

model Category {
  id    String  @id @default(uuid())
  uid   String
  value String
  icon  String? @map("icon")
  user  User    @relation(fields: [uid], references: [id])

  Transaction Transaction[]
  @@unique([uid, value], name: "Category_uid_value_unique_constraint")
  @@map(name: "categories")
}
