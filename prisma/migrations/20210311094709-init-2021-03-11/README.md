# Migration `20210311094709-init-2021-03-11`

This migration has been generated by Jussi at 3/11/2021, 11:47:09 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "categories" ADD COLUMN     "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
ADD COLUMN     "updated_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP

ALTER TABLE "transactions" ADD COLUMN     "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
ADD COLUMN     "updated_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP

ALTER TABLE "users" DROP COLUMN "isAdmin",
ADD COLUMN     "is_admin" BOOLEAN NOT NULL DEFAULT false,
ADD COLUMN     "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
ADD COLUMN     "updated_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20210311094709-init-2021-03-11
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,61 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource postgresql {
+  provider = "postgresql"
+  url = "***"
+}
+
+model Transaction {
+  id            String   @id @default(uuid())
+  uid           String
+  categoryId    String   @map("category_id")
+  comment       String?
+  integerAmount Int      @map("integer_amount")
+  time          DateTime
+  createdAt     DateTime @default(now()) @map("created_at")
+  updatedAt     DateTime @default(now()) @updatedAt @map("updated_at")
+
+  user     User     @relation(fields: [uid], references: [id])
+  category Category @relation(fields: [categoryId], references: [id])
+
+  @@map(name: "transactions")
+}
+
+model User {
+  id                 String   @id @default(uuid())
+  displayName        String?  @map("display_name")
+  email              String?  @unique
+  emailVerified      Boolean  @default(false) @map("email_verified")
+  password           String?
+  googleId           String?  @unique @map("google_id")
+  photoUrl           String?  @map("photo_url")
+  tokenVersion       Int      @default(1) @map("token_version")
+  disabled           Boolean  @default(false)
+  isAdmin            Boolean  @default(false) @map("is_admin")
+  prefersColorScheme String?  @map("prefers_color_scheme")
+  createdAt          DateTime @default(now()) @map("created_at")
+  updatedAt          DateTime @default(now()) @updatedAt @map("updated_at")
+
+  transactions Transaction[]
+  categories   Category[]
+
+  @@map(name: "users")
+}
+
+model Category {
+  id        String   @id @default(uuid())
+  uid       String
+  value     String
+  icon      String?
+  createdAt DateTime @default(now()) @map("created_at")
+  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")
+
+  user User @relation(fields: [uid], references: [id])
+
+  Transaction Transaction[]
+
+  @@unique([uid, value], name: "Category_uid_value_unique_constraint")
+  @@map(name: "categories")
+}
```


