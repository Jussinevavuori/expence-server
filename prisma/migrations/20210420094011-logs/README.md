# Migration `20210420094011-logs`

This migration has been generated by Jussi at 4/20/2021, 12:40:11 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Log" (
    "id" TEXT NOT NULL,
    "uid" TEXT NOT NULL,
    "type" TEXT NOT NULL,
    "message" TEXT NOT NULL,
    "data" TEXT NOT NULL,
    "stack_trace" TEXT NOT NULL,
    "device" TEXT NOT NULL,
    "timestamp" INTEGER NOT NULL,
    "timestring" TEXT NOT NULL,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "href" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

ALTER TABLE "Log" ADD FOREIGN KEY("uid")REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210318160829-add-feedback..20210420094011-logs
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Transaction {
   id            String   @id @default(uuid())
@@ -43,8 +43,9 @@
   Categories   Category[]
   Budgets      Budget[]
   Feedback     Feedback[]
+  Log Log[]
   @@map(name: "users")
 }
 model Budget {
@@ -96,4 +97,20 @@
   message String?
   User User @relation(fields: [uid], references: [id])
 }
+
+model Log {
+  id         String   @id @default(uuid())
+  uid        String
+  type       String
+  message    String
+  data       String
+  stackTrace String   @map("stack_trace")
+  device     String
+  timestamp  Int
+  timestring String
+  createdAt  DateTime @default(now()) @map("created_at")
+  href       String
+
+  User User @relation(fields: [uid], references: [id])
+}
```


